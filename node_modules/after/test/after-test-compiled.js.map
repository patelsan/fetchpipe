{"version":3,"sources":["after-test.js"],"names":[],"mappings":"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","file":"after-test-compiled.js","sourcesContent":["/*global suite, test*/\n\nvar assert = require(\"assert\")\n    , after = require(\"../\")\n\ntest(\"exists\", function () {\n    assert(typeof after === \"function\", \"after is not a function\")\n})\n\ntest(\"after when called with 0 invokes\", function (done) {\n    after(0, done)\n});\n\ntest(\"after 1\", function (done) {\n    var next = after(1, done)\n    next()\n})\n\ntest(\"after 5\", function (done) {\n    var next = after(5, done)\n    , i = 5\n\n    while (i--) {\n        next()\n    }\n})\n\ntest(\"manipulate count\", function (done) {\n    var next = after(1, done)\n    , i = 5\n\n    next.count = i\n    while (i--) {\n        next()\n    }\n})\n\ntest(\"after terminates on error\", function (done) {\n    var next = after(2, function(err) {\n        assert.equal(err.message, 'test');\n        done();\n    })\n    next(new Error('test'))\n    next(new Error('test2'))\n})\n\ntest('gee', function(done) {\n    done = after(2, done)\n\n    function cb(err) {\n        assert.equal(err.message, 1);\n        done()\n    }\n\n    var next = after(3, cb, function(err) {\n        assert.equal(err.message, 2)\n        done()\n    });\n\n    next()\n    next(new Error(1))\n    next(new Error(2))\n})\n\ntest('eee', function(done) {\n    done = after(3, done)\n\n    function cb(err) {\n        assert.equal(err.message, 1);\n        done()\n    }\n\n    var next = after(3, cb, function(err) {\n        assert.equal(err.message, 2)\n        done()\n    });\n\n    next(new Error(1))\n    next(new Error(2))\n    next(new Error(2))\n})\n\ntest('gge', function(done) {\n    function cb(err) {\n        assert.equal(err.message, 1);\n        done()\n    }\n\n    var next = after(3, cb, function(err) {\n        // should not happen\n        assert.ok(false);\n    });\n\n    next()\n    next()\n    next(new Error(1))\n})\n\ntest('egg', function(done) {\n    function cb(err) {\n        assert.equal(err.message, 1);\n        done()\n    }\n\n    var next = after(3, cb, function(err) {\n        // should not happen\n        assert.ok(false);\n    });\n\n    next(new Error(1))\n    next()\n    next()\n})\n\ntest('throws on too many calls', function(done) {\n    var next = after(1, done);\n    next()\n    assert.throws(next, /after called too many times/);\n});\n\n"]}