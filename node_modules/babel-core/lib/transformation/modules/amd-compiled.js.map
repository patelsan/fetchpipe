{"version":3,"sources":["amd.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC;;;AAG1B,SAAS,uBAAuB,CAAC,GAAG,EAAE;AAAE,MAAI,GAAG,IAAI,GAAG,CAAC,UAAU,EAAE;AAAE,WAAO,GAAG,CAAC;GAAE,MAAM;AAAE,QAAI,MAAM,GAAG,EAAE,CAAC,AAAC,IAAI,GAAG,IAAI,IAAI,EAAE;AAAE,WAAK,IAAI,GAAG,IAAI,GAAG,EAAE;AAAE,YAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;OAAE;KAAE,AAAC,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,AAAC,OAAO,MAAM,CAAC;GAAE;CAAE;;;;AAIhR,SAAS,sBAAsB,CAAC,GAAG,EAAE;AAAE,SAAO,GAAG,IAAI,GAAG,CAAC,UAAU,GAAG,GAAG,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC;CAAE;;;;AAIjG,SAAS,eAAe,CAAC,QAAQ,EAAE,WAAW,EAAE;AAAE,MAAI,EAAE,QAAQ,YAAY,WAAW,CAAA,AAAC,EAAE;AAAE,UAAM,IAAI,SAAS,CAAC,mCAAmC,CAAC,CAAC;GAAE;CAAE;;;;AAIzJ,SAAS,SAAS,CAAC,QAAQ,EAAE,UAAU,EAAE;AAAE,MAAI,OAAO,UAAU,KAAK,UAAU,IAAI,UAAU,KAAK,IAAI,EAAE;AAAE,UAAM,IAAI,SAAS,CAAC,0DAA0D,GAAG,OAAO,UAAU,CAAC,CAAC;GAAE,AAAC,QAAQ,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,IAAI,UAAU,CAAC,SAAS,EAAE,EAAE,WAAW,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,AAAC,IAAI,UAAU,EAAE,MAAM,CAAC,cAAc,GAAG,MAAM,CAAC,cAAc,CAAC,QAAQ,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAC,SAAS,GAAG,UAAU,CAAC;CAAE;;AAE9e,IAAI,QAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;;AAErC,IAAI,SAAS,GAAG,sBAAsB,CAAC,QAAQ,CAAC,CAAC;;AAEjD,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;AAElC,IAAI,QAAQ,GAAG,sBAAsB,CAAC,OAAO,CAAC,CAAC;;AAE/C,IAAI,yBAAyB,GAAG,OAAO,CAAC,4BAA4B,CAAC,CAAC;;AAEtE,IAAI,0BAA0B,GAAG,sBAAsB,CAAC,yBAAyB,CAAC,CAAC;;AAEnF,IAAI,mBAAmB,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC;;AAE1D,IAAI,oBAAoB,GAAG,sBAAsB,CAAC,mBAAmB,CAAC,CAAC;;AAEvE,IAAI,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;;AAElC,IAAI,IAAI,GAAG,uBAAuB,CAAC,KAAK,CAAC,CAAC;;AAE1C,IAAI,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;;AAEpC,IAAI,CAAC,GAAG,uBAAuB,CAAC,MAAM,CAAC,CAAC;;;;;;AAMxC,IAAI,YAAY,GAAG,CAAC,UAAU,iBAAiB,EAAE;AAC/C,WAAS,CAAC,YAAY,EAAE,iBAAiB,CAAC,CAAC;;AAE3C,WAAS,YAAY,GAAG;AACtB,mBAAe,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;;AAEpC,qBAAiB,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;GAC1C;;;;;;AAMD,cAAY,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS,KAAK,GAAG;AAC9C,YAAQ,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;GAC5E,CAAC;;;;;;AAMF,cAAY,CAAC,SAAS,CAAC,uBAAuB,GAAG,SAAS,uBAAuB,GAAG;AAClF,QAAI,KAAK,GAAG,EAAE,CAAC;AACf,SAAK,IAAI,IAAI,IAAI,IAAI,CAAC,GAAG,EAAE;AACzB,WAAK,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;KAC7B;AACD,WAAO,KAAK,CAAC;GACd,CAAC;;;;;;AAMF,cAAY,CAAC,SAAS,CAAC,SAAS,GAAG,SAAS,SAAS,CAAC,OAAO,EAAE;AAC7D,YAAQ,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;AAE/D,QAAI,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;;;;AAIxB,QAAI,KAAK,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;AACnC,QAAI,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AACxD,SAAK,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC;AACrD,SAAK,GAAG,CAAC,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;;;;AAIjC,QAAI,MAAM,GAAG,oBAAoB,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACvD,QAAI,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC/D,UAAM,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;;AAExC,QAAI,SAAS,GAAG,CAAC,CAAC,kBAAkB,CAAC,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;;AAE3E,QAAI,UAAU,GAAG,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AACpC,QAAI,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;AACtC,QAAI,UAAU,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;;AAE1D,QAAI,IAAI,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,UAAU,CAAC,CAAC;;AAEhE,WAAO,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC;GAC9C,CAAC;;;;;;;AAOF,cAAY,CAAC,SAAS,CAAC,aAAa,GAAG,SAAS,aAAa,GAAG;AAC9D,QAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;AAC5B,aAAO,SAAS,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;KAC5E,MAAM;AACL,aAAO,IAAI,CAAC;KACb;GACF,CAAC;;;;;;AAMF,cAAY,CAAC,SAAS,CAAC,qBAAqB,GAAG,SAAS,qBAAqB,CAAC,IAAI,EAAE;AAClF,WAAO,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;GAC5D,CAAC;;;;;;AAMF,cAAY,CAAC,SAAS,CAAC,iBAAiB,GAAG,SAAS,iBAAiB,CAAC,IAAI,EAAE;AAC1E,QAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;GACjC,CAAC;;;;;;AAMF,cAAY,CAAC,SAAS,CAAC,eAAe,GAAG,SAAS,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE;AAC/F,QAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;AAC5B,QAAI,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;;AAE1C,QAAI,CAAC,CAAC,0BAA0B,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,wBAAwB,CAAC,SAAS,CAAC,EAAE;AACpF,UAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC;KACxC;;AAED,QAAI,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE;;KAExC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,iBAAiB,CAAC,EAAE;;AAEnD,YAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;AAClC,WAAG,GAAG,CAAC,CAAC,gBAAgB,CAAC,GAAG,EAAE,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;OACxD,MAAM,IAAI,CAAC,CAAC,0BAA0B,CAAC,SAAS,CAAC,EAAE;;OAEnD,MAAM,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,kBAAkB,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,EAAE;;AAEnJ,cAAI,GAAG,GAAG,KAAK,CAAC,qBAAqB,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC5D,eAAK,CAAC,IAAI,CAAC,CAAC,CAAC,mBAAmB,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,kBAAkB,CAAC,GAAG,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,yBAAyB,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/I,aAAG,GAAG,CAAC,CAAC,gBAAgB,CAAC,GAAG,EAAE,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;SACxD,MAAM;;AAEL,cAAI,QAAQ,GAAG,SAAS,CAAC,QAAQ,CAAC;AAClC,cAAI,CAAC,CAAC,kBAAkB,CAAC,SAAS,CAAC,EAAE,QAAQ,GAAG,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;AACxE,aAAG,GAAG,CAAC,CAAC,gBAAgB,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;SACzC;;AAEL,QAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;GACnD,CAAC;;;;;;AAMF,cAAY,CAAC,SAAS,CAAC,eAAe,GAAG,SAAS,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE;AACxF,QAAI,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,EAAE;AAC1C,UAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;AAE1B,UAAI,SAAS,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAC1D,aAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,wBAAwB,EAAE;AACjD,eAAK,EAAE,SAAS,CAAC,KAAK;SACvB,EAAE,IAAI,CAAC,CAAC,CAAC;AACV,eAAO;OACR;KACF;;AAED,YAAQ,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;GACtE,CAAC;;;;;;AAMF,cAAY,CAAC,SAAS,CAAC,iBAAiB,GAAG,SAAS,iBAAiB,CAAC,IAAI,EAAE,KAAK,EAAE;AACjF,QAAI,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,EAAE;AACrC,UAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;AAE1B,UAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC;AAC9B,UAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,wBAAwB,EAAE;AACnD,aAAK,EAAE,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,CAAC;OAC1C,EAAE,IAAI,CAAC,CAAC;;AAET,UAAI,CAAC,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE;;AAEnC,cAAM,CAAC,WAAW,GAAG,CAAC,CAAC;OACxB;;AAED,WAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACnB,aAAO;KACR;;AAED,aAAS,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;GACzE,CAAC;;AAEF,SAAO,YAAY,CAAC;CACrB,CAAA,CAAE,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC;;AAEzB,OAAO,CAAC,SAAS,CAAC,GAAG,YAAY,CAAC;AAClC,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC","file":"amd-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// istanbul ignore next\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// istanbul ignore next\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _default = require(\"./_default\");\n\nvar _default2 = _interopRequireDefault(_default);\n\nvar _common = require(\"./common\");\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _lodashCollectionIncludes = require(\"lodash/collection/includes\");\n\nvar _lodashCollectionIncludes2 = _interopRequireDefault(_lodashCollectionIncludes);\n\nvar _lodashObjectValues = require(\"lodash/object/values\");\n\nvar _lodashObjectValues2 = _interopRequireDefault(_lodashObjectValues);\n\nvar _util = require(\"../../util\");\n\nvar util = _interopRequireWildcard(_util);\n\nvar _types = require(\"../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nvar AMDFormatter = (function (_DefaultFormatter) {\n  _inherits(AMDFormatter, _DefaultFormatter);\n\n  function AMDFormatter() {\n    _classCallCheck(this, AMDFormatter);\n\n    _DefaultFormatter.apply(this, arguments);\n  }\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.setup = function setup() {\n    _common2[\"default\"].prototype._setup.call(this, this.hasNonDefaultExports);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.buildDependencyLiterals = function buildDependencyLiterals() {\n    var names = [];\n    for (var name in this.ids) {\n      names.push(t.literal(name));\n    }\n    return names;\n  };\n\n  /**\n   * Wrap the entire body in a `define` wrapper.\n   */\n\n  AMDFormatter.prototype.transform = function transform(program) {\n    _common2[\"default\"].prototype.transform.apply(this, arguments);\n\n    var body = program.body;\n\n    // build an array of module names\n\n    var names = [t.literal(\"exports\")];\n    if (this.passModuleArg) names.push(t.literal(\"module\"));\n    names = names.concat(this.buildDependencyLiterals());\n    names = t.arrayExpression(names);\n\n    // build up define container\n\n    var params = _lodashObjectValues2[\"default\"](this.ids);\n    if (this.passModuleArg) params.unshift(t.identifier(\"module\"));\n    params.unshift(t.identifier(\"exports\"));\n\n    var container = t.functionExpression(null, params, t.blockStatement(body));\n\n    var defineArgs = [names, container];\n    var moduleName = this.getModuleName();\n    if (moduleName) defineArgs.unshift(t.literal(moduleName));\n\n    var call = t.callExpression(t.identifier(\"define\"), defineArgs);\n\n    program.body = [t.expressionStatement(call)];\n  };\n\n  /**\n   * Get the AMD module name that we'll prepend to the wrapper\n   * to define this module\n   */\n\n  AMDFormatter.prototype.getModuleName = function getModuleName() {\n    if (this.file.opts.moduleIds) {\n      return _default2[\"default\"].prototype.getModuleName.apply(this, arguments);\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype._getExternalReference = function _getExternalReference(node) {\n    return this.scope.generateUidIdentifier(node.source.value);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.importDeclaration = function importDeclaration(node) {\n    this.getExternalReference(node);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.importSpecifier = function importSpecifier(specifier, node, nodes, scope) {\n    var key = node.source.value;\n    var ref = this.getExternalReference(node);\n\n    if (t.isImportNamespaceSpecifier(specifier) || t.isImportDefaultSpecifier(specifier)) {\n      this.defaultIds[key] = specifier.local;\n    }\n\n    if (this.isModuleType(node, \"absolute\")) {\n      // absolute module reference\n    } else if (this.isModuleType(node, \"absoluteDefault\")) {\n        // prevent unnecessary renaming of dynamic imports\n        this.ids[node.source.value] = ref;\n        ref = t.memberExpression(ref, t.identifier(\"default\"));\n      } else if (t.isImportNamespaceSpecifier(specifier)) {\n        // import * as bar from \"foo\";\n      } else if (!_lodashCollectionIncludes2[\"default\"](this.file.dynamicImported, node) && t.isSpecifierDefault(specifier) && !this.noInteropRequireImport) {\n          // import foo from \"foo\";\n          var uid = scope.generateUidIdentifier(specifier.local.name);\n          nodes.push(t.variableDeclaration(\"var\", [t.variableDeclarator(uid, t.callExpression(this.file.addHelper(\"interop-require-default\"), [ref]))]));\n          ref = t.memberExpression(uid, t.identifier(\"default\"));\n        } else {\n          // import { foo } from \"foo\";\n          var imported = specifier.imported;\n          if (t.isSpecifierDefault(specifier)) imported = t.identifier(\"default\");\n          ref = t.memberExpression(ref, imported);\n        }\n\n    this.remaps.add(scope, specifier.local.name, ref);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.exportSpecifier = function exportSpecifier(specifier, node, nodes) {\n    if (this.doDefaultExportInterop(specifier)) {\n      this.passModuleArg = true;\n\n      if (specifier.exported !== specifier.local && !node.source) {\n        nodes.push(util.template(\"exports-default-assign\", {\n          VALUE: specifier.local\n        }, true));\n        return;\n      }\n    }\n\n    _common2[\"default\"].prototype.exportSpecifier.apply(this, arguments);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.exportDeclaration = function exportDeclaration(node, nodes) {\n    if (this.doDefaultExportInterop(node)) {\n      this.passModuleArg = true;\n\n      var declar = node.declaration;\n      var assign = util.template(\"exports-default-assign\", {\n        VALUE: this._pushStatement(declar, nodes)\n      }, true);\n\n      if (t.isFunctionDeclaration(declar)) {\n        // we can hoist this assignment to the top of the file\n        assign._blockHoist = 3;\n      }\n\n      nodes.push(assign);\n      return;\n    }\n\n    _default2[\"default\"].prototype.exportDeclaration.apply(this, arguments);\n  };\n\n  return AMDFormatter;\n})(_default2[\"default\"]);\n\nexports[\"default\"] = AMDFormatter;\nmodule.exports = exports[\"default\"];"]}