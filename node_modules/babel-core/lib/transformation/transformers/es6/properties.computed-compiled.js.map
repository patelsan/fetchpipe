{"version":3,"sources":["properties.computed.js"],"names":[],"mappings":"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","file":"properties.computed-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\nvar _types = require(\"../../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nfunction loose(node, body, objId) {\n  var _arr = node.properties;\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var prop = _arr[_i];\n    body.push(t.expressionStatement(t.assignmentExpression(\"=\", t.memberExpression(objId, prop.key, prop.computed || t.isLiteral(prop.key)), prop.value)));\n  }\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction spec(node, body, objId, initProps, file) {\n  // add a simple assignment for all Symbol member expressions due to symbol polyfill limitations\n  // otherwise use Object.defineProperty\n\n  var _arr2 = node.properties;\n  for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n    var prop = _arr2[_i2];\n    // this wont work with Object.defineProperty\n    if (t.isLiteral(t.toComputedKey(prop), { value: \"__proto__\" })) {\n      initProps.push(prop);\n      continue;\n    }\n\n    var key = prop.key;\n    if (t.isIdentifier(key) && !prop.computed) {\n      key = t.literal(key.name);\n    }\n\n    var bodyNode = t.callExpression(file.addHelper(\"define-property\"), [objId, key, prop.value]);\n\n    body.push(t.expressionStatement(bodyNode));\n  }\n\n  // only one node and it's a Object.defineProperty that returns the object\n\n  if (body.length === 1) {\n    var first = body[0].expression;\n\n    if (t.isCallExpression(first)) {\n      first.arguments[0] = t.objectExpression(initProps);\n      return first;\n    }\n  }\n}\n\n/**\n * [Please add a description.]\n */\n\nvar visitor = {\n\n  /**\n   * [Please add a description.]\n   */\n\n  ObjectExpression: {\n    exit: function exit(node, parent, scope, file) {\n      var hasComputed = false;\n\n      var _arr3 = node.properties;\n      for (var _i3 = 0; _i3 < _arr3.length; _i3++) {\n        var prop = _arr3[_i3];\n        hasComputed = t.isProperty(prop, { computed: true, kind: \"init\" });\n        if (hasComputed) break;\n      }\n\n      if (!hasComputed) return;\n\n      // put all getters/setters into the first object expression as well as all initialisers up\n      // to the first computed property\n\n      var initProps = [];\n      var stopInits = false;\n\n      node.properties = node.properties.filter(function (prop) {\n        if (prop.computed) {\n          stopInits = true;\n        }\n\n        if (prop.kind !== \"init\" || !stopInits) {\n          initProps.push(prop);\n          return false;\n        } else {\n          return true;\n        }\n      });\n\n      //\n\n      var objId = scope.generateUidIdentifierBasedOnNode(parent);\n\n      //\n\n      var body = [];\n\n      //\n\n      var callback = spec;\n      if (file.isLoose(\"es6.properties.computed\")) callback = loose;\n\n      var result = callback(node, body, objId, initProps, file);\n      if (result) return result;\n\n      //\n\n      body.unshift(t.variableDeclaration(\"var\", [t.variableDeclarator(objId, t.objectExpression(initProps))]));\n\n      body.push(t.expressionStatement(objId));\n\n      return body;\n    }\n  }\n};\nexports.visitor = visitor;"]}