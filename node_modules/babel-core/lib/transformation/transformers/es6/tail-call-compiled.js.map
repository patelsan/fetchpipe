{"version":3,"sources":["tail-call.js"],"names":[],"mappings":"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","file":"tail-call-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// istanbul ignore next\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _lodashCollectionReduceRight = require(\"lodash/collection/reduceRight\");\n\nvar _lodashCollectionReduceRight2 = _interopRequireDefault(_lodashCollectionReduceRight);\n\nvar _messages = require(\"../../../messages\");\n\nvar messages = _interopRequireWildcard(_messages);\n\nvar _lodashArrayFlatten = require(\"lodash/array/flatten\");\n\nvar _lodashArrayFlatten2 = _interopRequireDefault(_lodashArrayFlatten);\n\nvar _util = require(\"../../../util\");\n\nvar util = _interopRequireWildcard(_util);\n\nvar _lodashCollectionMap = require(\"lodash/collection/map\");\n\nvar _lodashCollectionMap2 = _interopRequireDefault(_lodashCollectionMap);\n\nvar _types = require(\"../../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\nvar metadata = {\n  group: \"builtin-trailing\"\n};\n\nexports.metadata = metadata;\n/**\n * [Please add a description.]\n */\n\nvar visitor = {\n\n  /**\n   * [Please add a description.]\n   */\n\n  Function: function Function(node, parent, scope, file) {\n    if (node.generator || node.async) return;\n    var tailCall = new TailCallTransformer(this, scope, file);\n    tailCall.run();\n  }\n};\n\nexports.visitor = visitor;\n/**\n * [Please add a description.]\n */\n\nfunction returnBlock(expr) {\n  return t.blockStatement([t.returnStatement(expr)]);\n}\n\n/**\n * [Please add a description.]\n */\n\nvar visitor = {\n\n  /**\n   * [Please add a description.]\n   */\n\n  enter: function enter(node, parent) {\n    if (t.isTryStatement(parent)) {\n      if (node === parent.block) {\n        this.skip();\n      } else if (parent.finalizer && node !== parent.finalizer) {\n        this.skip();\n      }\n    }\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  ReturnStatement: function ReturnStatement(node, parent, scope, state) {\n    return state.subTransform(node.argument);\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  Function: function Function() {\n    this.skip();\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  VariableDeclaration: function VariableDeclaration(node, parent, scope, state) {\n    state.vars.push(node);\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  ThisExpression: function ThisExpression(node, parent, scope, state) {\n    if (!state.isShadowed) {\n      state.needsThis = true;\n      state.thisPaths.push(this);\n    }\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  ReferencedIdentifier: function ReferencedIdentifier(node, parent, scope, state) {\n    if (node.name === \"arguments\" && (!state.isShadowed || node._shadowedFunctionLiteral)) {\n      state.needsArguments = true;\n      state.argumentsPaths.push(this);\n    }\n  }\n};\n\n/**\n * [Please add a description.]\n */\n\nvar TailCallTransformer = (function () {\n  function TailCallTransformer(path, scope, file) {\n    _classCallCheck(this, TailCallTransformer);\n\n    this.hasTailRecursion = false;\n\n    this.needsArguments = false;\n    this.argumentsPaths = [];\n    this.setsArguments = false;\n\n    this.needsThis = false;\n    this.thisPaths = [];\n\n    this.isShadowed = path.isArrowFunctionExpression() || path.is(\"shadow\");\n    this.ownerId = path.node.id;\n    this.vars = [];\n\n    this.scope = scope;\n    this.path = path;\n    this.file = file;\n    this.node = path.node;\n  }\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.getArgumentsId = function getArgumentsId() {\n    return this.argumentsId = this.argumentsId || this.scope.generateUidIdentifier(\"arguments\");\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.getThisId = function getThisId() {\n    return this.thisId = this.thisId || this.scope.generateUidIdentifier(\"this\");\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.getLeftId = function getLeftId() {\n    return this.leftId = this.leftId || this.scope.generateUidIdentifier(\"left\");\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.getFunctionId = function getFunctionId() {\n    return this.functionId = this.functionId || this.scope.generateUidIdentifier(\"function\");\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.getAgainId = function getAgainId() {\n    return this.againId = this.againId || this.scope.generateUidIdentifier(\"again\");\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.getParams = function getParams() {\n    var params = this.params;\n\n    if (!params) {\n      params = this.node.params;\n      this.paramDecls = [];\n\n      for (var i = 0; i < params.length; i++) {\n        var param = params[i];\n        if (!param._isDefaultPlaceholder) {\n          this.paramDecls.push(t.variableDeclarator(param, params[i] = this.scope.generateUidIdentifier(\"x\")));\n        }\n      }\n    }\n\n    return this.params = params;\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.hasDeopt = function hasDeopt() {\n    // check if the ownerId has been reassigned, if it has then it's not safe to\n    // perform optimisations\n    var ownerIdInfo = this.scope.getBinding(this.ownerId.name);\n    return ownerIdInfo && !ownerIdInfo.constant;\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.run = function run() {\n    var node = this.node;\n\n    // only tail recursion can be optimized as for now, so we can skip anonymous\n    // functions entirely\n    var ownerId = this.ownerId;\n    if (!ownerId) return;\n\n    // traverse the function and look for tail recursion\n    this.path.traverse(visitor, this);\n\n    // has no tail call recursion\n    if (!this.hasTailRecursion) return;\n\n    // the function binding isn't constant so we can't be sure that it's the same function :(\n    if (this.hasDeopt()) {\n      this.file.log.deopt(node, messages.get(\"tailCallReassignmentDeopt\"));\n      return;\n    }\n\n    //\n\n    var body = this.path.ensureBlock().body;\n\n    for (var i = 0; i < body.length; i++) {\n      var bodyNode = body[i];\n      if (!t.isFunctionDeclaration(bodyNode)) continue;\n\n      bodyNode = body[i] = t.variableDeclaration(\"var\", [t.variableDeclarator(bodyNode.id, t.toExpression(bodyNode))]);\n      bodyNode._blockHoist = 2;\n    }\n\n    if (this.vars.length > 0) {\n      var declarations = _lodashArrayFlatten2[\"default\"](_lodashCollectionMap2[\"default\"](this.vars, function (decl) {\n        return decl.declarations;\n      }));\n\n      var assignment = _lodashCollectionReduceRight2[\"default\"](declarations, function (expr, decl) {\n        return t.assignmentExpression(\"=\", decl.id, expr);\n      }, t.identifier(\"undefined\"));\n\n      var statement = t.expressionStatement(assignment);\n      statement._blockHoist = Infinity;\n      body.unshift(statement);\n    }\n\n    var paramDecls = this.paramDecls;\n    if (paramDecls.length > 0) {\n      var paramDecl = t.variableDeclaration(\"var\", paramDecls);\n      paramDecl._blockHoist = Infinity;\n      body.unshift(paramDecl);\n    }\n\n    body.unshift(t.expressionStatement(t.assignmentExpression(\"=\", this.getAgainId(), t.literal(false))));\n\n    node.body = util.template(\"tail-call-body\", {\n      FUNCTION_ID: this.getFunctionId(),\n      AGAIN_ID: this.getAgainId(),\n      BLOCK: node.body\n    });\n\n    var topVars = [];\n\n    if (this.needsThis) {\n      var _arr = this.thisPaths;\n\n      for (var _i = 0; _i < _arr.length; _i++) {\n        var path = _arr[_i];\n        path.replaceWith(this.getThisId());\n      }\n\n      topVars.push(t.variableDeclarator(this.getThisId(), t.thisExpression()));\n    }\n\n    if (this.needsArguments || this.setsArguments) {\n      var _arr2 = this.argumentsPaths;\n\n      for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n        var _path = _arr2[_i2];\n        _path.replaceWith(this.argumentsId);\n      }\n\n      var decl = t.variableDeclarator(this.argumentsId);\n      if (this.argumentsId) {\n        decl.init = t.identifier(\"arguments\");\n        decl.init._shadowedFunctionLiteral = this.path;\n      }\n      topVars.push(decl);\n    }\n\n    var leftId = this.leftId;\n    if (leftId) {\n      topVars.push(t.variableDeclarator(leftId));\n    }\n\n    if (topVars.length > 0) {\n      node.body.body.unshift(t.variableDeclaration(\"var\", topVars));\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.subTransform = function subTransform(node) {\n    if (!node) return;\n\n    var handler = this[\"subTransform\" + node.type];\n    if (handler) return handler.call(this, node);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.subTransformConditionalExpression = function subTransformConditionalExpression(node) {\n    var callConsequent = this.subTransform(node.consequent);\n    var callAlternate = this.subTransform(node.alternate);\n    if (!callConsequent && !callAlternate) {\n      return;\n    }\n\n    // if ternary operator had tail recursion in value, convert to optimized if-statement\n    node.type = \"IfStatement\";\n    node.consequent = callConsequent ? t.toBlock(callConsequent) : returnBlock(node.consequent);\n\n    if (callAlternate) {\n      node.alternate = t.isIfStatement(callAlternate) ? callAlternate : t.toBlock(callAlternate);\n    } else {\n      node.alternate = returnBlock(node.alternate);\n    }\n\n    return [node];\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.subTransformLogicalExpression = function subTransformLogicalExpression(node) {\n    // only call in right-value of can be optimized\n    var callRight = this.subTransform(node.right);\n    if (!callRight) return;\n\n    // cache left value as it might have side-effects\n    var leftId = this.getLeftId();\n    var testExpr = t.assignmentExpression(\"=\", leftId, node.left);\n\n    if (node.operator === \"&&\") {\n      testExpr = t.unaryExpression(\"!\", testExpr);\n    }\n\n    return [t.ifStatement(testExpr, returnBlock(leftId))].concat(callRight);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.subTransformSequenceExpression = function subTransformSequenceExpression(node) {\n    var seq = node.expressions;\n\n    // only last element can be optimized\n    var lastCall = this.subTransform(seq[seq.length - 1]);\n    if (!lastCall) {\n      return;\n    }\n\n    // remove converted expression from sequence\n    // and convert to regular expression if needed\n    if (--seq.length === 1) {\n      node = seq[0];\n    }\n\n    return [t.expressionStatement(node)].concat(lastCall);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TailCallTransformer.prototype.subTransformCallExpression = function subTransformCallExpression(node) {\n    var callee = node.callee;\n    var thisBinding, args;\n\n    if (t.isMemberExpression(callee, { computed: false }) && t.isIdentifier(callee.property)) {\n      switch (callee.property.name) {\n        case \"call\":\n          args = t.arrayExpression(node.arguments.slice(1));\n          break;\n\n        case \"apply\":\n          args = node.arguments[1] || t.identifier(\"undefined\");\n          this.needsArguments = true;\n          break;\n\n        default:\n          return;\n      }\n\n      thisBinding = node.arguments[0];\n      callee = callee.object;\n    }\n\n    // only tail recursion can be optimized as for now\n    if (!t.isIdentifier(callee) || !this.scope.bindingIdentifierEquals(callee.name, this.ownerId)) {\n      return;\n    }\n\n    this.hasTailRecursion = true;\n\n    if (this.hasDeopt()) return;\n\n    var body = [];\n\n    if (this.needsThis && !t.isThisExpression(thisBinding)) {\n      body.push(t.expressionStatement(t.assignmentExpression(\"=\", this.getThisId(), thisBinding || t.identifier(\"undefined\"))));\n    }\n\n    if (!args) {\n      args = t.arrayExpression(node.arguments);\n    }\n\n    var argumentsId = this.getArgumentsId();\n    var params = this.getParams();\n\n    if (this.needsArguments) {\n      body.push(t.expressionStatement(t.assignmentExpression(\"=\", argumentsId, args)));\n    }\n\n    if (t.isArrayExpression(args)) {\n      var elems = args.elements;\n\n      // pad out the args so all the function args are reset - https://github.com/babel/babel/issues/1938\n      while (elems.length < params.length) {\n        elems.push(t.identifier(\"undefined\"));\n      }\n\n      for (var i = 0; i < elems.length; i++) {\n        var param = params[i];\n        var elem = elems[i];\n\n        if (param && !param._isDefaultPlaceholder) {\n          elems[i] = t.assignmentExpression(\"=\", param, elem);\n        } else {\n          // exceeds parameters but push it anyway to ensure correct execution\n        }\n      }\n\n      if (!this.needsArguments) {\n        var _arr3 = elems;\n\n        for (var _i3 = 0; _i3 < _arr3.length; _i3++) {\n          var elem = _arr3[_i3];\n          // only push expressions that we really need, this will skip pure arguments that exceed the\n          // parameter length of the current function\n          if (!this.scope.isPure(elem)) {\n            body.push(t.expressionStatement(elem));\n          }\n        }\n      }\n    } else {\n      this.setsArguments = true;\n      for (var i = 0; i < params.length; i++) {\n        var param = params[i];\n        if (!param._isDefaultPlaceholder) {\n          body.push(t.expressionStatement(t.assignmentExpression(\"=\", param, t.memberExpression(argumentsId, t.literal(i), true))));\n        }\n      }\n    }\n\n    body.push(t.expressionStatement(t.assignmentExpression(\"=\", this.getAgainId(), t.literal(true))));\n\n    body.push(t.continueStatement(this.getFunctionId()));\n\n    return body;\n  };\n\n  return TailCallTransformer;\n})();"]}