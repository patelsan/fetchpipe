{"version":3,"sources":["shadow-functions.js"],"names":[],"mappings":"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","file":"shadow-functions-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\nvar _types = require(\"../../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\nvar metadata = {\n  group: \"builtin-trailing\"\n};\n\nexports.metadata = metadata;\nfunction shouldShadow(path, shadowPath) {\n  if (path.is(\"_forceShadow\")) {\n    return true;\n  } else {\n    return shadowPath && !shadowPath.isArrowFunctionExpression();\n  }\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction remap(path, key, create) {\n  // ensure that we're shadowed\n  var shadowPath = path.inShadow(key);\n  if (!shouldShadow(path, shadowPath)) return;\n\n  var shadowFunction = path.node._shadowedFunctionLiteral;\n  var currentFunction;\n\n  var fnPath = path.findParent(function (path) {\n    if (path.isProgram() || path.isFunction()) {\n      // catch current function in case this is the shadowed one and we can ignore it\n      currentFunction = currentFunction || path;\n    }\n\n    if (path.isProgram()) {\n      return true;\n    } else if (path.isFunction()) {\n      if (shadowFunction) {\n        return path === shadowFunction || path.node === shadowFunction.node;\n      } else {\n        return !path.is(\"shadow\");\n      }\n    }\n\n    return false;\n  });\n\n  // no point in realiasing if we're in this function\n  if (fnPath === currentFunction) return;\n\n  var cached = fnPath.getData(key);\n  if (cached) return cached;\n\n  var init = create();\n  var id = path.scope.generateUidIdentifier(key);\n\n  fnPath.setData(key, id);\n  fnPath.scope.push({ id: id, init: init });\n\n  return id;\n}\n\n/**\n * [Please add a description.]\n */\n\nvar visitor = {\n\n  /**\n   * [Please add a description.]\n   */\n\n  ThisExpression: function ThisExpression() {\n    return remap(this, \"this\", function () {\n      return t.thisExpression();\n    });\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  ReferencedIdentifier: function ReferencedIdentifier(node) {\n    if (node.name === \"arguments\") {\n      return remap(this, \"arguments\", function () {\n        return t.identifier(\"arguments\");\n      });\n    }\n  }\n};\nexports.visitor = visitor;"]}