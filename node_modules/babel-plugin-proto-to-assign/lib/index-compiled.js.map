{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _lodashArrayPull = require(\"lodash/array/pull\");\n\nvar _lodashArrayPull2 = _interopRequireDefault(_lodashArrayPull);\n\nexports[\"default\"] = function (_ref) {\n  var Plugin = _ref.Plugin;\n  var t = _ref.types;\n\n  function isProtoKey(node) {\n    return t.isLiteral(t.toComputedKey(node, node.key), { value: \"__proto__\" });\n  }\n\n  function isProtoAssignmentExpression(node) {\n    var left = node.left;\n    return t.isMemberExpression(left) && t.isLiteral(t.toComputedKey(left, left.property), { value: \"__proto__\" });\n  }\n\n  function buildDefaultsCallExpression(expr, ref, file) {\n    return t.expressionStatement(t.callExpression(file.addHelper(\"defaults\"), [ref, expr.right]));\n  }\n\n  return new Plugin(\"proto-to-assign\", {\n    metadata: {\n      secondPass: true\n    },\n\n    visitor: {\n      AssignmentExpression: function AssignmentExpression(node, parent, scope, file) {\n        if (!isProtoAssignmentExpression(node)) return;\n\n        var nodes = [];\n        var left = node.left.object;\n        var temp = scope.maybeGenerateMemoised(left);\n\n        if (temp) nodes.push(t.expressionStatement(t.assignmentExpression(\"=\", temp, left)));\n        nodes.push(buildDefaultsCallExpression(node, temp || left, file));\n        if (temp) nodes.push(temp);\n\n        return nodes;\n      },\n\n      ExpressionStatement: function ExpressionStatement(node, parent, scope, file) {\n        var expr = node.expression;\n        if (!t.isAssignmentExpression(expr, { operator: \"=\" })) return;\n\n        if (isProtoAssignmentExpression(expr)) {\n          return buildDefaultsCallExpression(expr, expr.left.object, file);\n        }\n      },\n\n      ObjectExpression: function ObjectExpression(node, parent, scope, file) {\n        var proto;\n\n        for (var i = 0; i < node.properties.length; i++) {\n          var prop = node.properties[i];\n\n          if (isProtoKey(prop)) {\n            proto = prop.value;\n            (0, _lodashArrayPull2[\"default\"])(node.properties, prop);\n          }\n        }\n\n        if (proto) {\n          var args = [t.objectExpression([]), proto];\n          if (node.properties.length) args.push(node);\n          return t.callExpression(file.addHelper(\"extends\"), args);\n        }\n      }\n    }\n  });\n};\n\nmodule.exports = exports[\"default\"];"]}