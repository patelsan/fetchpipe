{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAKA,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;;;;;;;;;;;;;;AAczB,SAAS,OAAO,CAAC,IAAI,EAAE;AACrB,MAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AAClB,MAAI,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC;AAC1B,MAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC;AAC7B,MAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;AAC/B,MAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AACpE,MAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;CACnB;;;;;;;;;AASD,OAAO,CAAC,SAAS,CAAC,QAAQ,GAAG,YAAU;AACrC,MAAI,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AAC1D,MAAI,IAAI,CAAC,MAAM,EAAE;AACf,QAAI,IAAI,GAAI,IAAI,CAAC,MAAM,EAAE,CAAC;AAC1B,QAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC;AACpD,MAAE,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC,GAAI,EAAE,GAAG,SAAS,GAAG,EAAE,GAAG,SAAS,CAAC;GAC1E;AACD,SAAO,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;CACnC,CAAC;;;;;;;;AAQF,OAAO,CAAC,SAAS,CAAC,KAAK,GAAG,YAAU;AAClC,MAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;CACnB,CAAC;;;;;;;;AAQF,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,UAAS,GAAG,EAAC;AACtC,MAAI,CAAC,EAAE,GAAG,GAAG,CAAC;CACf,CAAC;;;;;;;;AAQF,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,UAAS,GAAG,EAAC;AACtC,MAAI,CAAC,GAAG,GAAG,GAAG,CAAC;CAChB,CAAC;;;;;;;;AAQF,OAAO,CAAC,SAAS,CAAC,SAAS,GAAG,UAAS,MAAM,EAAC;AAC5C,MAAI,CAAC,MAAM,GAAG,MAAM,CAAC;CACtB,CAAC","file":"index-compiled.js","sourcesContent":["\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n"]}