{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\nvar EventEmitter = require('events').EventEmitter;\nvar fs = require('fs');\nvar sysPath = require('path');\nvar each = require('async-each');\nvar anymatch = require('anymatch');\nvar globparent = require('glob-parent');\nvar isglob = require('is-glob');\nvar arrify = require('arrify');\nvar isAbsolute = require('path-is-absolute');\nvar flatten = require('lodash.flatten');\n\nvar NodeFsHandler = require('./lib/nodefs-handler');\nvar FsEventsHandler = require('./lib/fsevents-handler');\n\n// Public: Main class.\n// Watches files & directories for changes.\n//\n// * _opts - object, chokidar options hash\n//\n// Emitted events:\n// `add`, `addDir`, `change`, `unlink`, `unlinkDir`, `all`, `error`\n//\n// Examples\n//\n//  var watcher = new FSWatcher()\n//    .add(directories)\n//    .on('add', function(path) {console.log('File', path, 'was added');})\n//    .on('change', function(path) {console.log('File', path, 'was changed');})\n//    .on('unlink', function(path) {console.log('File', path, 'was removed');})\n//    .on('all', function(event, path) {console.log(path, ' emitted ', event);})\n//\nfunction FSWatcher(_opts) {\n  var opts = {};\n  // in case _opts that is passed in is a frozen object\n  if (_opts) for (var opt in _opts) opts[opt] = _opts[opt];\n  this._watched = Object.create(null);\n  this._closers = Object.create(null);\n  this._ignoredPaths = Object.create(null);\n  Object.defineProperty(this, '_globIgnored', {\n    get: function() { return Object.keys(this._ignoredPaths); }\n  });\n  this.closed = false;\n  this._throttled = Object.create(null);\n  this._symlinkPaths = Object.create(null);\n\n  function undef(key) {\n    return opts[key] === undefined;\n  }\n\n  // Set up default options.\n  if (undef('persistent')) opts.persistent = true;\n  if (undef('ignoreInitial')) opts.ignoreInitial = false;\n  if (undef('ignorePermissionErrors')) opts.ignorePermissionErrors = false;\n  if (undef('interval')) opts.interval = 100;\n  if (undef('binaryInterval')) opts.binaryInterval = 300;\n  this.enableBinaryInterval = opts.binaryInterval !== opts.interval;\n\n  // Enable fsevents on OS X when polling isn't explicitly enabled.\n  if (undef('useFsEvents')) opts.useFsEvents = !opts.usePolling;\n\n  // If we can't use fsevents, ensure the options reflect it's disabled.\n  if (!FsEventsHandler.canUse()) opts.useFsEvents = false;\n\n  // Use polling on Mac if not using fsevents.\n  // Other platforms use non-polling fs.watch.\n  if (undef('usePolling') && !opts.useFsEvents) {\n    opts.usePolling = process.platform === 'darwin';\n  }\n\n  // Editor atomic write normalization enabled by default with fs.watch\n  if (undef('atomic')) opts.atomic = !opts.usePolling && !opts.useFsEvents;\n  if (opts.atomic) this._pendingUnlinks = Object.create(null);\n\n  if (undef('followSymlinks')) opts.followSymlinks = true;\n\n  if (undef('awaitWriteFinish')) opts.awaitWriteFinish = false;\n  if (opts.awaitWriteFinish === true) opts.awaitWriteFinish = {};\n  var awf = opts.awaitWriteFinish;\n  if (awf) {\n    if (!awf.stabilityThreshold) awf.stabilityThreshold = 2000;\n    if (!awf.pollInterval) awf.pollInterval = 100;\n\n    this._pendingWrites = Object.create(null);\n  }\n\n  this._isntIgnored = function(path, stat) {\n    return !this._isIgnored(path, stat);\n  }.bind(this);\n\n  var readyCalls = 0;\n  this._emitReady = function() {\n    if (++readyCalls >= this._readyCount) {\n      this._emitReady = Function.prototype;\n      // use process.nextTick to allow time for listener to be bound\n      process.nextTick(this.emit.bind(this, 'ready'));\n    }\n  }.bind(this);\n\n  this.options = opts;\n\n  // You’re frozen when your heart’s not open.\n  Object.freeze(opts);\n}\n\nFSWatcher.prototype = Object.create(EventEmitter.prototype);\n\n// Common helpers\n// --------------\n\n// Private method: Normalize and emit events\n//\n// * event     - string, type of event\n// * path      - string, file or directory path\n// * val[1..3] - arguments to be passed with event\n//\n// Returns the error if defined, otherwise the value of the\n// FSWatcher instance's `closed` flag\nFSWatcher.prototype._emit = function(event, path, val1, val2, val3) {\n  if (this.options.cwd) path = sysPath.relative(this.options.cwd, path);\n  var args = [event, path];\n  if (val3 !== undefined) args.push(val1, val2, val3);\n  else if (val2 !== undefined) args.push(val1, val2);\n  else if (val1 !== undefined) args.push(val1);\n\n  var awf = this.options.awaitWriteFinish;\n  if (awf && this._pendingWrites[path]) return this;\n\n  if (this.options.atomic) {\n    if (event === 'unlink') {\n      this._pendingUnlinks[path] = args;\n      setTimeout(function() {\n        Object.keys(this._pendingUnlinks).forEach(function(path) {\n          this.emit.apply(this, this._pendingUnlinks[path]);\n          this.emit.apply(this, ['all'].concat(this._pendingUnlinks[path]));\n          delete this._pendingUnlinks[path];\n        }.bind(this));\n      }.bind(this), 100);\n      return this;\n    } else if (event === 'add' && this._pendingUnlinks[path]) {\n      event = args[0] = 'change';\n      delete this._pendingUnlinks[path];\n    }\n  }\n\n  if (event === 'change') {\n    if (!this._throttle('change', path, 50)) return this;\n  }\n\n  var emitEvent = function() {\n    this.emit.apply(this, args);\n    if (event !== 'error') this.emit.apply(this, ['all'].concat(args));\n  }.bind(this);\n\n  if (awf && event === 'add') {\n    this._awaitWriteFinish(path, awf.stabilityThreshold, function(err, stats) {\n      if (err) {\n        event = args[0] = 'error';\n        args[1] = err;\n        emitEvent();\n      } else if (stats) {\n        // if stats doesn't exist the file must have been deleted\n        args.push(stats);\n        emitEvent();\n      }\n    });\n  } else if (\n    this.options.alwaysStat && val1 === undefined &&\n    (event === 'add' || event === 'addDir' || event === 'change')\n  ) {\n    fs.stat(path, function(error, stats) {\n      // Suppress event when fs.stat fails, to avoid sending undefined 'stat'\n      if (error || !stats) return;\n\n      args.push(stats);\n      emitEvent();\n    });\n  } else {\n    emitEvent();\n  }\n\n  return this;\n};\n\n// Private method: Common handler for errors\n//\n// * error  - object, Error instance\n//\n// Returns the error if defined, otherwise the value of the\n// FSWatcher instance's `closed` flag\nFSWatcher.prototype._handleError = function(error) {\n  var code = error && error.code;\n  var ipe = this.options.ignorePermissionErrors;\n  if (error &&\n    code !== 'ENOENT' &&\n    code !== 'ENOTDIR' &&\n    (!ipe || (code !== 'EPERM' && code !== 'EACCES'))\n  ) this.emit('error', error);\n  return error || this.closed;\n};\n\n// Private method: Helper utility for throttling\n//\n// * action  - string, type of action being throttled\n// * path    - string, path being acted upon\n// * timeout - int, duration of time to suppress duplicate actions\n//\n// Returns throttle tracking object or false if action should be suppressed\nFSWatcher.prototype._throttle = function(action, path, timeout) {\n  if (!(action in this._throttled)) {\n    this._throttled[action] = Object.create(null);\n  }\n  var throttled = this._throttled[action];\n  if (path in throttled) return false;\n  function clear() {\n    delete throttled[path];\n    clearTimeout(timeoutObject);\n  }\n  var timeoutObject = setTimeout(clear, timeout);\n  throttled[path] = {timeoutObject: timeoutObject, clear: clear};\n  return throttled[path];\n};\n\n// Private method: Awaits write operation to finish\n//\n// * path    - string, path being acted upon\n// * threshold - int, time in milliseconds a file size must be fixed before\n//                    acknowledgeing write operation is finished\n// * callback - function, callback to call when write operation is finished\n// Polls a newly created file for size variations. When files size does not\n// change for 'threshold' milliseconds calls callback.\nFSWatcher.prototype._awaitWriteFinish = function(path, threshold, callback) {\n  var timeoutHandler;\n\n  (function awaitWriteFinish (prevStat) {\n    fs.stat(path, function(err, curStat) {\n      if (err) {\n        // if the file have been erased, the file entry in _pendingWrites will\n        // be deleted in the unlink event.\n        if (err.code == 'ENOENT') return;\n        return callback(err);\n      }\n\n      var now = new Date();\n      if (this._pendingWrites[path] === undefined) {\n        this._pendingWrites[path] = {\n          creationTime: now,\n          cancelWait: function() {\n            delete this._pendingWrites[path];\n            clearTimeout(timeoutHandler);\n            return callback();\n          }.bind(this)\n        }\n        return timeoutHandler = setTimeout(\n          awaitWriteFinish.bind(this, curStat),\n          this.options.awaitWriteFinish.pollInterval\n        );\n      }\n\n      if (\n        curStat.size == prevStat.size &&\n        now - this._pendingWrites[path].creationTime > threshold\n      ) {\n        delete this._pendingWrites[path];\n        callback(null, curStat);\n      } else {\n        return timeoutHandler = setTimeout(\n          awaitWriteFinish.bind(this, curStat),\n          this.options.awaitWriteFinish.pollInterval\n        );\n      }\n    }.bind(this));\n  }.bind(this))();\n}\n\n// Private method: Determines whether user has asked to ignore this path\n//\n// * path  - string, path to file or directory\n// * stats - object, result of fs.stat\n//\n// Returns boolean\nFSWatcher.prototype._isIgnored = function(path, stats) {\n  if (\n    this.options.atomic &&\n    /\\..*\\.(sw[px])$|\\~$|\\.subl.*\\.tmp/.test(path)\n  ) return true;\n\n  if (!this._userIgnored) {\n    var cwd = this.options.cwd;\n    var ignored = this.options.ignored;\n    if (cwd && ignored) {\n      ignored = arrify(ignored).map(function (path) {\n        if (typeof path !== 'string') return path;\n        return isAbsolute(path) ? path : sysPath.join(cwd, path);\n      });\n    }\n    this._userIgnored = anymatch(this._globIgnored\n      .concat(ignored)\n      .concat(arrify(ignored)\n        .filter(function(path) {\n          return typeof path === 'string' && !isglob(path);\n        }).map(function(path) {\n          return path + '/**/*';\n        })\n      )\n    );\n  }\n\n  return this._userIgnored([path, stats]);\n};\n\n// Private method: Provides a set of common helpers and properties relating to\n// symlink and glob handling\n//\n// * path - string, file, directory, or glob pattern being watched\n// * depth - int, at any depth > 0, this isn't a glob\n//\n// Returns object containing helpers for this path\nFSWatcher.prototype._getWatchHelpers = function(path, depth) {\n  path = path.replace(/^\\.[\\/\\\\]/, '');\n  var watchPath = depth || !isglob(path) ? path : globparent(path);\n  var hasGlob = watchPath !== path;\n  var globFilter = hasGlob ? anymatch(path) : false;\n\n  var entryPath = function(entry) {\n    return sysPath.join(watchPath, sysPath.relative(watchPath, entry.fullPath));\n  }\n\n  var filterPath = function(entry) {\n    return (!hasGlob || globFilter(entryPath(entry))) &&\n      this._isntIgnored(entryPath(entry), entry.stat) &&\n      (this.options.ignorePermissionErrors ||\n        this._hasReadPermissions(entry.stat));\n  }.bind(this);\n\n  var getDirParts = function(path) {\n    if (!hasGlob) return false;\n    var parts = sysPath.relative(watchPath, path).split(/[\\/\\\\]/);\n    return parts;\n  }\n  var dirParts = getDirParts(path);\n  if (dirParts && dirParts.length > 1) dirParts.pop();\n\n  var filterDir = function(entry) {\n    if (hasGlob) {\n      var entryParts = getDirParts(entry.fullPath);\n      var globstar = false;\n      var unmatchedGlob = !dirParts.every(function(part, i) {\n        if (part === '**') globstar = true;\n        return globstar || !entryParts[i] || anymatch(part, entryParts[i]);\n      });\n    }\n    return !unmatchedGlob && this._isntIgnored(entryPath(entry), entry.stat);\n  }.bind(this);\n\n  return {\n    followSymlinks: this.options.followSymlinks,\n    statMethod: this.options.followSymlinks ? 'stat' : 'lstat',\n    path: path,\n    watchPath: watchPath,\n    entryPath: entryPath,\n    hasGlob: hasGlob,\n    globFilter: globFilter,\n    filterPath: filterPath,\n    filterDir: filterDir\n  };\n}\n\n// Directory helpers\n// -----------------\n\n// Private method: Provides directory tracking objects\n//\n// * directory - string, path of the directory\n//\n// Returns the directory's tracking object\nFSWatcher.prototype._getWatchedDir = function(directory) {\n  var dir = sysPath.resolve(directory);\n  var watcherRemove = this._remove.bind(this);\n  if (!(dir in this._watched)) this._watched[dir] = {\n    _items: Object.create(null),\n    add: function(item) {this._items[item] = true;},\n    remove: function(item) {\n      delete this._items[item];\n      if (!this.children().length) {\n        fs.readdir(dir, function(err) {\n          if (err) watcherRemove(sysPath.dirname(dir), sysPath.basename(dir));\n        });\n      }\n    },\n    has: function(item) {return item in this._items;},\n    children: function() {return Object.keys(this._items);}\n  };\n  return this._watched[dir];\n};\n\n// File helpers\n// ------------\n\n// Private method: Check for read permissions\n// Based on this answer on SO: http://stackoverflow.com/a/11781404/1358405\n//\n// * stats - object, result of fs.stat\n//\n// Returns boolean\nFSWatcher.prototype._hasReadPermissions = function(stats) {\n  return Boolean(4 & parseInt(((stats && stats.mode) & 0x1ff).toString(8)[0], 10));\n};\n\n// Private method: Handles emitting unlink events for\n// files and directories, and via recursion, for\n// files and directories within directories that are unlinked\n//\n// * directory - string, directory within which the following item is located\n// * item      - string, base path of item/directory\n//\n// Returns nothing\nFSWatcher.prototype._remove = function(directory, item) {\n  // if what is being deleted is a directory, get that directory's paths\n  // for recursive deleting and cleaning of watched object\n  // if it is not a directory, nestedDirectoryChildren will be empty array\n  var path = sysPath.join(directory, item);\n  var fullPath = sysPath.resolve(path);\n  var isDirectory = this._watched[path] || this._watched[fullPath];\n\n  // prevent duplicate handling in case of arriving here nearly simultaneously\n  // via multiple paths (such as _handleFile and _handleDir)\n  if (!this._throttle('remove', path, 100)) return;\n\n  // if the only watched file is removed, watch for its return\n  var watchedDirs = Object.keys(this._watched);\n  if (!isDirectory && !this.options.useFsEvents && watchedDirs.length === 1) {\n    this.add(directory, item, true);\n  }\n\n  // This will create a new entry in the watched object in either case\n  // so we got to do the directory check beforehand\n  var nestedDirectoryChildren = this._getWatchedDir(path).children();\n\n  // Recursively remove children directories / files.\n  nestedDirectoryChildren.forEach(function(nestedItem) {\n    this._remove(path, nestedItem);\n  }, this);\n\n  // Check if item was on the watched list and remove it\n  var parent = this._getWatchedDir(directory);\n  var wasTracked = parent.has(item);\n  parent.remove(item);\n\n  // If we wait for this file to be fully written, cancel the wait.\n  if (this.options.awaitWriteFinish && this._pendingWrites[path]) {\n    this._pendingWrites[path].cancelWait();\n    return;\n  }\n\n  // The Entry will either be a directory that just got removed\n  // or a bogus entry to a file, in either case we have to remove it\n  delete this._watched[path];\n  delete this._watched[fullPath];\n  var eventName = isDirectory ? 'unlinkDir' : 'unlink';\n  if (wasTracked && !this._isIgnored(path)) this._emit(eventName, path);\n};\n\n// Public method: Adds paths to be watched on an existing FSWatcher instance\n\n// * paths     - string or array of strings, file/directory paths and/or globs\n// * _origAdd  - private boolean, for handling non-existent paths to be watched\n// * _internal - private boolean, indicates a non-user add\n\n// Returns an instance of FSWatcher for chaining.\nFSWatcher.prototype.add = function(paths, _origAdd, _internal) {\n  var cwd = this.options.cwd;\n  this.closed = false;\n  paths = flatten(arrify(paths));\n\n  if (!paths.every(isString)) {\n    throw new TypeError('Non-string provided as watch path');\n  }\n\n  if (cwd) paths = paths.map(function(path) {\n    if (isAbsolute(path)) {\n      return path;\n    } else if (path[0] === '!') {\n      return '!' + sysPath.join(cwd, path.substring(1));\n    } else {\n      return sysPath.join(cwd, path);\n    }\n  });\n\n  // set aside negated glob strings\n  paths = paths.filter(function(path) {\n    if (path[0] === '!') this._ignoredPaths[path.substring(1)] = true;\n    else {\n      // if a path is being added that was previously ignored, stop ignoring it\n      delete this._ignoredPaths[path];\n      delete this._ignoredPaths[path + '/**/*'];\n\n      // reset the cached userIgnored anymatch fn\n      // to make ignoredPaths changes effective\n      this._userIgnored = null;\n\n      return true;\n    }\n  }, this);\n\n  if (this.options.useFsEvents && FsEventsHandler.canUse()) {\n    if (!this._readyCount) this._readyCount = paths.length;\n    if (this.options.persistent) this._readyCount *= 2;\n    paths.forEach(this._addToFsEvents, this);\n  } else {\n    if (!this._readyCount) this._readyCount = 0;\n    this._readyCount += paths.length;\n    each(paths, function(path, next) {\n      this._addToNodeFs(path, !_internal, 0, 0, _origAdd, function(err, res) {\n        if (res) this._emitReady();\n        next(err, res);\n      }.bind(this));\n    }.bind(this), function(error, results) {\n      results.forEach(function(item) {\n        if (!item) return;\n        this.add(sysPath.dirname(item), sysPath.basename(_origAdd || item));\n      }, this);\n    }.bind(this));\n  }\n\n  return this;\n};\n\n// Public method: Close watchers or start ignoring events from specified paths.\n\n// * paths     - string or array of strings, file/directory paths and/or globs\n\n// Returns instance of FSWatcher for chaining.\nFSWatcher.prototype.unwatch = function(paths) {\n  if (this.closed) return this;\n  paths = flatten(arrify(paths));\n\n  paths.forEach(function(path) {\n    if (this._closers[path]) {\n      this._closers[path]();\n      delete this._closers[path];\n      this._getWatchedDir(sysPath.dirname(path)).remove(sysPath.basename(path));\n    } else {\n      //convert to absolute path\n      path = sysPath.resolve(path);\n\n      this._ignoredPaths[path] = true;\n      if (path in this._watched) {\n        this._ignoredPaths[path + '/**/*'] = true;\n      }\n\n      // reset the cached userIgnored anymatch fn\n      // to make ignoredPaths changes effective\n      this._userIgnored = null;\n    }\n  }, this);\n\n  return this;\n};\n\n// Public method: Close watchers and remove all listeners from watched paths.\n\n// Returns instance of FSWatcher for chaining.\nFSWatcher.prototype.close = function() {\n  if (this.closed) return this;\n\n  this.closed = true;\n  Object.keys(this._closers).forEach(function(watchPath) {\n    this._closers[watchPath]();\n    delete this._closers[watchPath];\n  }, this);\n  this._watched = Object.create(null);\n\n  this.removeAllListeners();\n  return this;\n};\n\n// Attach watch handler prototype methods\nfunction importHandler(handler) {\n  Object.keys(handler.prototype).forEach(function(method) {\n    FSWatcher.prototype[method] = handler.prototype[method];\n  });\n}\nimportHandler(NodeFsHandler);\nif (FsEventsHandler.canUse()) importHandler(FsEventsHandler);\n\n// little isString util for use in Array.prototype.every\nfunction isString(maybeString) {\n  return typeof maybeString === 'string'\n}\n\n// Export FSWatcher class\nexports.FSWatcher = FSWatcher;\n\n// Public function: Instantiates watcher with paths to be tracked.\n\n// * paths     - string or array of strings, file/directory paths and/or globs\n// * options   - object, chokidar options\n\n// Returns an instance of FSWatcher for chaining.\nexports.watch = function(paths, options) {\n  return new FSWatcher(options).add(paths);\n};\n"]}