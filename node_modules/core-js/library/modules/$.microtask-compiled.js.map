{"version":3,"sources":["$.microtask.js"],"names":[],"mappings":";;AAAA,IAAI,MAAM,GAAM,OAAO,CAAC,YAAY,CAAC;IACjC,SAAS,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,GAAG;IACnC,QAAQ,GAAI,MAAM,CAAC,gBAAgB,IAAI,MAAM,CAAC,sBAAsB;IACpE,OAAO,GAAK,MAAM,CAAC,OAAO;IAC1B,MAAM,GAAM,OAAO,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,IAAI,SAAS;IACpD,IAAI;IAAE,IAAI;IAAE,MAAM,CAAC;;AAEvB,IAAI,KAAK,GAAG,SAAR,KAAK,GAAa;AACpB,MAAI,MAAM,EAAE,MAAM,CAAC;AACnB,MAAG,MAAM,KAAK,MAAM,GAAG,OAAO,CAAC,MAAM,CAAA,AAAC,EAAC;AACrC,WAAO,CAAC,MAAM,GAAG,IAAI,CAAC;AACtB,UAAM,CAAC,IAAI,EAAE,CAAC;GACf;AACD,SAAM,IAAI,EAAC;AACT,UAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACrB,QAAG,MAAM,EAAC,MAAM,CAAC,KAAK,EAAE,CAAC;AACzB,QAAI,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC;AACf,QAAG,MAAM,EAAC,MAAM,CAAC,IAAI,EAAE,CAAC;AACxB,QAAI,GAAG,IAAI,CAAC,IAAI,CAAC;GAClB,AAAC,IAAI,GAAG,SAAS,CAAC;AACnB,MAAG,MAAM,EAAC,MAAM,CAAC,KAAK,EAAE,CAAC;CAC1B,CAAA;;;AAGD,IAAG,MAAM,EAAC;AACR,QAAM,GAAG,YAAU;AACjB,WAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;GACzB,CAAC;;CAEH,MAAM,IAAG,QAAQ,EAAC;AACjB,QAAI,MAAM,GAAG,CAAC;QACV,IAAI,GAAK,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;AACzC,QAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,EAAC,aAAa,EAAE,IAAI,EAAC,CAAC,CAAC;AACzD,UAAM,GAAG,YAAU;AACjB,UAAI,CAAC,IAAI,GAAG,MAAM,GAAG,CAAC,MAAM,CAAC;KAC9B,CAAC;;;;;;;GAOH,MAAM;AACL,YAAM,GAAG,YAAU;;AAEjB,iBAAS,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;OAC/B,CAAC;KACH;;AAED,MAAM,CAAC,OAAO,GAAG,SAAS,IAAI,CAAC,EAAE,EAAC;AAChC,MAAI,IAAI,GAAG,EAAC,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,IAAI,OAAO,CAAC,MAAM,EAAC,CAAC;AACvE,MAAG,IAAI,EAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACzB,MAAG,CAAC,IAAI,EAAC;AACP,QAAI,GAAG,IAAI,CAAC;AACZ,UAAM,EAAE,CAAC;GACV,AAAC,IAAI,GAAG,IAAI,CAAC;CACf,CAAC","file":"$.microtask-compiled.js","sourcesContent":["var global    = require('./$.global')\r\n  , macrotask = require('./$.task').set\r\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\r\n  , process   = global.process\r\n  , isNode    = require('./$.cof')(process) == 'process'\r\n  , head, last, notify;\r\n\r\nvar flush = function(){\r\n  var parent, domain;\r\n  if(isNode && (parent = process.domain)){\r\n    process.domain = null;\r\n    parent.exit();\r\n  }\r\n  while(head){\r\n    domain = head.domain;\r\n    if(domain)domain.enter();\r\n    head.fn.call(); // <- currently we use it only for Promise - try / catch not required\r\n    if(domain)domain.exit();\r\n    head = head.next;\r\n  } last = undefined;\r\n  if(parent)parent.enter();\r\n}\r\n\r\n// Node.js\r\nif(isNode){\r\n  notify = function(){\r\n    process.nextTick(flush);\r\n  };\r\n// browsers with MutationObserver\r\n} else if(Observer){\r\n  var toggle = 1\r\n    , node   = document.createTextNode('');\r\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\r\n  notify = function(){\r\n    node.data = toggle = -toggle;\r\n  };\r\n// for other environments - macrotask based on:\r\n// - setImmediate\r\n// - MessageChannel\r\n// - window.postMessag\r\n// - onreadystatechange\r\n// - setTimeout\r\n} else {\r\n  notify = function(){\r\n    // strange IE + webpack dev server bug - use .call(global)\r\n    macrotask.call(global, flush);\r\n  };\r\n}\r\n\r\nmodule.exports = function asap(fn){\r\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\r\n  if(last)last.next = task;\r\n  if(!head){\r\n    head = task;\r\n    notify();\r\n  } last = task;\r\n};"]}