{"version":3,"sources":["fsevents.js"],"names":[],"mappings":"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","file":"fsevents-compiled.js","sourcesContent":["/*\n ** Â© 2014 by Philipp Dunkel <pip@pipobscure.com>\n ** Licensed under MIT License.\n */\n\n/* jshint node:true */\n'use strict';\n\nvar path = require('path');\nvar binary = require('node-pre-gyp');\nvar Native = require(binary.find(path.join(__dirname, 'package.json')));\n\nvar EventEmitter = require('events').EventEmitter;\nvar fs = require('fs');\nvar inherits = require('util').inherits;\n\nfunction FSEvents(path, handler) {\n  EventEmitter.call(this);\n\n  Object.defineProperty(this, '_impl', {\n    value: new Native.FSEvents(String(path || ''), handler),\n    enumerable: false,\n    writable: false\n  });\n}\n\ninherits(FSEvents, EventEmitter);\nproxies(FSEvents, Native.FSEvents);\n\nmodule.exports = watch;\nmodule.exports.getInfo = getInfo;\nmodule.exports.FSEvents = Native.FSEvents;\nmodule.exports.Constants = Native.Constants;\n\nvar defer = global.setImmediate || process.nextTick;\n\nfunction watch(path) {\n  var fse = new FSEvents(String(path || ''), handler);\n  EventEmitter.call(fse);\n  return fse;\n\n  function handler(path, flags, id) {\n    defer(function() {\n      fse.emit('fsevent', path, flags, id);\n      var info = getInfo(path, flags);\n      info.id = id;\n      if (info.event === 'moved') {\n        fs.stat(info.path, function(err, stat) {\n          info.event = (err || !stat) ? 'moved-out' : 'moved-in';\n          fse.emit('change', path, info);\n          fse.emit(info.event, path, info);\n        });\n      } else {\n        fse.emit('change', path, info);\n        fse.emit(info.event, path, info);\n      }\n    });\n  }\n}\n\nfunction proxies(ctor, target) {\n  Object.keys(target.prototype).filter(function(key) {\n    return typeof target.prototype[key] === 'function';\n  }).forEach(function(key) {\n    ctor.prototype[key] = function() {\n      this._impl[key].apply(this._impl, arguments);\n      return this;\n    }\n  });\n}\n\nfunction getFileType(flags) {\n  if (Native.Constants.kFSEventStreamEventFlagItemIsFile & flags) return 'file';\n  if (Native.Constants.kFSEventStreamEventFlagItemIsDir & flags) return 'directory';\n  if (Native.Constants.kFSEventStreamEventFlagItemIsSymlink & flags) return 'symlink';\n}\n\nfunction getEventType(flags) {\n  if (Native.Constants.kFSEventStreamEventFlagItemRemoved & flags) return 'deleted';\n  if (Native.Constants.kFSEventStreamEventFlagItemRenamed & flags) return 'moved';\n  if (Native.Constants.kFSEventStreamEventFlagItemCreated & flags) return 'created';\n  if (Native.Constants.kFSEventStreamEventFlagItemModified & flags) return 'modified';\n  if (Native.Constants.kFSEventStreamEventFlagRootChanged & flags) return 'root-changed';\n\n  return 'unknown';\n}\n\nfunction getFileChanges(flags) {\n  return {\n    inode: !! (Native.Constants.kFSEventStreamEventFlagItemInodeMetaMod & flags),\n    finder: !! (Native.Constants.kFSEventStreamEventFlagItemFinderInfoMod & flags),\n    access: !! (Native.Constants.kFSEventStreamEventFlagItemChangeOwner & flags),\n    xattrs: !! (Native.Constants.kFSEventStreamEventFlagItemXattrMod & flags)\n  };\n}\n\nfunction getInfo(path, flags) {\n  return {\n    path: path,\n    event: getEventType(flags),\n    type: getFileType(flags),\n    changes: getFileChanges(flags),\n    flags: flags\n  };\n}\n"]}