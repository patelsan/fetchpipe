{"version":3,"sources":["build.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,MAAM,CAAC,OAAO,GAAG,OAAO,GAAG,KAAK,CAAC;;AAEjC,OAAO,CAAC,KAAK,GAAG,qEAAqE,CAAC;;AAEtF,IAAI,OAAO,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AAC3C,IAAI,eAAe,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;AAC3D,IAAI,SAAS,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;;AAE1C,SAAS,QAAQ,CAAC,GAAG,EAAC,IAAI,EAAC,QAAQ,EAAE;AACjC,mBAAe,CAAC,GAAG,EAAC,IAAI,EAAC,UAAS,GAAG,EAAC,MAAM,EAAE;AAC1C,YAAI,UAAU,GAAG,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACjE,YAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AAC5B,sBAAU,GAAG,UAAU,CACT,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CACd,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;SACzC;AACD,eAAO,CAAC,OAAO,CAAC,UAAU,EAAC,MAAM,CAAC,IAAI,EAAC,UAAS,GAAG,EAAE;AACjD,mBAAO,QAAQ,CAAC,GAAG,CAAC,CAAC;SACxB,CAAC,CAAC;KACN,CAAC,CAAC;CACN;;AAED,SAAS,KAAK,CAAC,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAE;;;;;AAKhC,QAAI,IAAI,CAAC,MAAM,IAAK,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,AAAC,EAAE;;;AAG/C,eAAO,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,EAAC,EAAE,EAAC,UAAS,GAAG,EAAE;AACvC,gBAAI,GAAG,EAAE,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC;AAC9B,qBAAS,CAAC,GAAG,EAAC,IAAI,EAAC,UAAS,GAAG,EAAE;AAC7B,oBAAI,GAAG,EAAE,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC;AAC9B,uBAAO,QAAQ,CAAC,GAAG,EAAC,IAAI,EAAC,QAAQ,CAAC,CAAC;aACtC,CAAC,CAAC;SACN,CAAC,CAAC;KACN,MAAM;AACH,eAAO,QAAQ,CAAC,GAAG,EAAC,IAAI,EAAC,QAAQ,CAAC,CAAC;KACtC;CACJ","file":"build-compiled.js","sourcesContent":["\"use strict\";\n\nmodule.exports = exports = build;\n\nexports.usage = 'Attempts to compile the module by dispatching to node-gyp or nw-gyp';\n\nvar compile = require('./util/compile.js');\nvar handle_gyp_opts = require('./util/handle_gyp_opts.js');\nvar configure = require('./configure.js');\n\nfunction do_build(gyp,argv,callback) {\n    handle_gyp_opts(gyp,argv,function(err,result) {\n        var final_args = ['build'].concat(result.gyp).concat(result.pre);\n        if (result.unparsed.length > 0) {\n            final_args = final_args.\n                          concat(['--']).\n                          concat(result.unparsed);\n        }\n        compile.run_gyp(final_args,result.opts,function(err) {\n            return callback(err);\n        });\n    });\n}\n\nfunction build(gyp, argv, callback) {\n\n    // Form up commands to pass to node-gyp:\n    // We map `node-pre-gyp build` to `node-gyp configure build` so that we do not\n    // trigger a clean and therefore do not pay the penalty of a full recompile\n    if (argv.length && (argv.indexOf('rebuild') > -1)) {\n        // here we map `node-pre-gyp rebuild` to `node-gyp rebuild` which internally means\n        // \"clean + configure + build\" and triggers a full recompile\n        compile.run_gyp(['clean'],{},function(err) {\n            if (err) return callback(err);\n            configure(gyp,argv,function(err) {\n                if (err) return callback(err);\n                return do_build(gyp,argv,callback);\n            });\n        });\n    } else {\n        return do_build(gyp,argv,callback);        \n    }\n}\n"]}