{"version":3,"sources":["compile.js"],"names":[],"mappings":"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","file":"compile-compiled.js","sourcesContent":["\"use strict\";\n\nmodule.exports = exports;\n\nvar fs = require('fs');\nvar path = require('path');\nvar win = process.platform == 'win32';\nvar existsSync = fs.existsSync || path.existsSync;\nvar cp = require('child_process');\n\n// try to build up the complete path to node-gyp\n/* priority:\n  - node-gyp on ENV:npm_config_node_gyp (https://github.com/npm/npm/pull/4887)\n  - node-gyp on NODE_PATH\n  - node-gyp inside npm on NODE_PATH (ignore on iojs)\n  - node-gyp inside npm beside node exe\n*/\nfunction which_node_gyp() {\n    var node_gyp_bin;\n    if (process.env.npm_config_node_gyp) {\n      try {\n          node_gyp_bin = process.env.npm_config_node_gyp;\n          if (existsSync(node_gyp_bin)) {\n              return node_gyp_bin;\n          }\n      } catch (err) { }\n    }\n    try {\n        var node_gyp_main = require.resolve('node-gyp');\n        node_gyp_bin = path.join(path.dirname(\n                                     path.dirname(node_gyp_main)),\n                                     'bin/node-gyp.js');\n        if (existsSync(node_gyp_bin)) {\n            return node_gyp_bin;\n        }\n    } catch (err) { }\n    if (process.execPath.indexOf('iojs') === -1) {\n        try {\n            var npm_main = require.resolve('npm');\n            node_gyp_bin = path.join(path.dirname(\n                                         path.dirname(npm_main)),\n                                         'node_modules/node-gyp/bin/node-gyp.js');\n            if (existsSync(node_gyp_bin)) {\n                return node_gyp_bin;\n            }\n        } catch (err) { }\n    }\n    var npm_base = path.join(path.dirname(\n                             path.dirname(process.execPath)),\n                             'lib/node_modules/npm/');\n    node_gyp_bin = path.join(npm_base, 'node_modules/node-gyp/bin/node-gyp.js');\n    if (existsSync(node_gyp_bin)) {\n        return node_gyp_bin;\n    }\n}\n\nmodule.exports.run_gyp = function(args,opts,callback) {\n    var shell_cmd = '';\n    var cmd_args = [];\n    if (opts.runtime && opts.runtime == 'node-webkit') {\n        shell_cmd = 'nw-gyp';\n        if (win) shell_cmd += '.cmd';\n    } else {\n        var node_gyp_path = which_node_gyp();\n        if (node_gyp_path) {\n            shell_cmd = process.execPath;\n            cmd_args.push(node_gyp_path);\n        } else {\n            shell_cmd = 'node-gyp';\n            if (win) shell_cmd += '.cmd';\n        }\n    }\n    var final_args = cmd_args.concat(args);\n    var cmd = cp.spawn(shell_cmd, final_args, {cwd: undefined, env: process.env, stdio: [ 0, 1, 2]});\n    cmd.on('error', function (err) {\n        if (err) {\n            return callback(new Error(\"Failed to execute '\" + shell_cmd + ' ' + final_args.join(' ') + \"' (\" + err + \")\"));\n        }\n        callback(null,opts);\n    });\n    cmd.on('close', function (code) {\n        if (code && code !== 0) {\n            return callback(new Error(\"Failed to execute '\" + shell_cmd + ' ' + final_args.join(' ') + \"' (\" + code + \")\"));\n        }\n        callback(null,opts);\n    });\n};\n"]}