{"version":3,"sources":["s3_setup.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;;AAEzB,IAAI,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;;AAEzB,IAAI,SAAS,GAAC,sCAAsC,CAAC;;AAErD,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,UAAS,EAAE,EAAC,MAAM,EAAE;AACxC,QAAI,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;AACxB,QAAI,gBAAgB,GAAG,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AACrD,UAAM,CAAC,MAAM,GAAG,AAAC,CAAC,GAAG,CAAC,QAAQ,IAAI,GAAG,CAAC,QAAQ,IAAI,GAAG,GAAI,EAAE,GAAG,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAC,EAAE,CAAC,CAAC;AAC3F,QAAG,CAAC,gBAAgB,EAAE;AAClB,eAAO;KACV;AACD,QAAI,CAAC,MAAM,CAAC,MAAM,EAAE;AAChB,cAAM,CAAC,MAAM,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC;KACvC;AACD,QAAI,CAAC,MAAM,CAAC,MAAM,EAAE;AAChB,YAAI,SAAS,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC;AACpC,YAAI,SAAS,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,IAAI,KAAK,IAC7B,SAAS,CAAC,MAAM,IAAI,CAAC,EAAE;;AAEvB,kBAAM,CAAC,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,KAAK,EAAC,EAAE,CAAC,CAAC;SAC/C;KACJ;CACJ,CAAC","file":"s3_setup-compiled.js","sourcesContent":["\"use strict\";\n\nmodule.exports = exports;\n\nvar url = require('url');\n\nvar URI_REGEX=\"^(.*)\\.(s3(?:-.*)?)\\.amazonaws\\.com$\";\n\nmodule.exports.detect = function(to,config) {\n    var uri = url.parse(to);\n    var hostname_matches = uri.hostname.match(URI_REGEX);\n    config.prefix = (!uri.pathname || uri.pathname == '/') ? '' : uri.pathname.replace('/','');\n    if(!hostname_matches) {\n        return;\n    }\n    if (!config.bucket) {\n        config.bucket = hostname_matches[1];\n    }\n    if (!config.region) {\n        var s3_domain = hostname_matches[2];\n        if (s3_domain.slice(0,3) == 's3-' &&\n            s3_domain.length >= 3) {\n            // it appears the region is explicit in the url\n            config.region = s3_domain.replace('s3-','');\n        }\n    }\n};\n"]}