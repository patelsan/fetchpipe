{"version":3,"sources":["tracker.js"],"names":[],"mappings":"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","file":"tracker-compiled.js","sourcesContent":["\"use strict\"\nvar test = require(\"tap\").test\nvar Tracker = require(\"../index.js\").Tracker\n\nvar timeoutError = new Error(\"timeout\")\nvar testEvent = function (obj,event,next) {\n  var timeout = setTimeout(function(){\n    obj.removeListener(event, eventHandler)\n    next(timeoutError)\n  }, 10)\n  var eventHandler = function () {\n    var args = Array.prototype.slice.call(arguments)\n    args.unshift(null)\n    clearTimeout(timeout)\n    next.apply(null, args)\n  }\n  obj.once(event, eventHandler)\n}\n\ntest(\"Tracker\", function (t) {\n  t.plan(10)\n\n  var name = \"test\"\n  var track = new Tracker(name)\n\n  t.is(track.completed(), 0, \"Nothing todo is 0 completion\")\n\n  var todo = 100\n  track = new Tracker(name, todo)\n  t.is(track.completed(), 0, \"Nothing done is 0 completion\")\n\n  testEvent(track, \"change\", afterCompleteWork)\n  track.completeWork(100)\n  function afterCompleteWork(er, onChangeName) {\n    t.is(er, null, \"completeWork: on change event fired\")\n    t.is(onChangeName, name, \"completeWork: on change emits the correct name\")\n  }\n  t.is(track.completed(), 1, \"completeWork: 100% completed\")\n\n  testEvent(track, \"change\", afterAddWork)\n  track.addWork(100)\n  function afterAddWork(er, onChangeName) {\n    t.is(er, null, \"addWork: on change event fired\")\n    t.is(onChangeName, name, \"addWork: on change emits the correct name\")\n  }\n  t.is(track.completed(), 0.5, \"addWork: 50% completed\")\n\n\n  track.completeWork(200)\n  t.is(track.completed(), 1, \"completeWork: Over completion is still only 100% complete\")\n\n  track = new Tracker(name, todo)\n  track.completeWork(50)\n  track.finish()\n  t.is(track.completed(), 1, \"finish: Explicitly finishing moves to 100%\")\n})\n"]}