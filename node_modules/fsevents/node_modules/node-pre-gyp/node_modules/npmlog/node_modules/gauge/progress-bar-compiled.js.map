{"version":3,"sources":["progress-bar.js"],"names":[],"mappings":"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","file":"progress-bar-compiled.js","sourcesContent":["\"use strict\"\nvar hasUnicode = require(\"has-unicode\")\nvar ansi = require(\"ansi\")\nvar align = {\n  center: require(\"lodash.pad\"),\n  left:   require(\"lodash.padright\"),\n  right:  require(\"lodash.padleft\")\n}\nvar defaultStream = process.stderr\nfunction isTTY() {\n  return process.stderr.isTTY\n}\nfunction getWritableTTYColumns() {\n  // Writing to the final column wraps the line\n  // We have to use stdout here, because Node's magic SIGWINCH handler only\n  // updates process.stdout, not process.stderr\n  return process.stdout.columns - 1\n}\n\nvar ProgressBar = module.exports = function (options, cursor) {\n  if (! options) options = {}\n  if (! cursor && options.write) {\n    cursor = options\n    options = {}\n  }\n  if (! cursor) {\n    cursor = ansi(defaultStream)\n  }\n  this.cursor = cursor\n  this.showing = false\n  this.theme = options.theme || (hasUnicode() ? ProgressBar.unicode : ProgressBar.ascii)\n  this.template = options.template || [\n    {type: \"name\", separated: true, length: 25},\n    {type: \"spinner\", separated: true},\n    {type: \"startgroup\"},\n    {type: \"completionbar\"},\n    {type: \"endgroup\"}\n  ]\n  this.updatefreq = options.maxUpdateFrequency || 50\n  this.lastName = \"\"\n  this.lastCompleted = 0\n  this.spun = 0\n  this.last = new Date(0)\n\n  var self = this\n  this._handleSizeChange = function () {\n    if (!self.showing) return\n    self.hide()\n    self.show()\n  }\n}\nProgressBar.prototype = {}\n\nProgressBar.unicode = {\n  startgroup: \"╢\",\n  endgroup: \"╟\",\n  complete: \"█\",\n  incomplete: \"░\",\n  spinner: \"▀▐▄▌\",\n  subsection: \"→\"\n}\n\nProgressBar.ascii = {\n  startgroup: \"|\",\n  endgroup: \"|\",\n  complete: \"#\",\n  incomplete: \"-\",\n  spinner: \"-\\\\|/\",\n  subsection: \"->\"\n}\n\nProgressBar.prototype.setTheme = function(theme) {\n  this.theme = theme\n}\n\nProgressBar.prototype.setTemplate = function(template) {\n  this.template = template\n}\n\nProgressBar.prototype._enableResizeEvents = function() {\n  process.stdout.on('resize', this._handleSizeChange)\n}\n\nProgressBar.prototype._disableResizeEvents = function() {\n  process.stdout.removeListener('resize', this._handleSizeChange)\n}\n\nProgressBar.prototype.disable = function() {\n  this.hide()\n  this.disabled = true\n}\n\nProgressBar.prototype.enable = function() {\n  this.disabled = false\n  this.show()\n}\n\nProgressBar.prototype.hide = function() {\n  if (!isTTY()) return\n  if (this.disabled) return\n  this.cursor.show()\n  if (this.showing) this.cursor.up(1)\n  this.cursor.horizontalAbsolute(0).eraseLine()\n  this.showing = false\n}\n\nvar repeat = function (str, count) {\n  var out = \"\"\n  for (var ii=0; ii<count; ++ii) out += str\n  return out\n}\n\nProgressBar.prototype.pulse = function(name) {\n  ++ this.spun\n  if (! this.showing) return\n  if (this.disabled) return\n\n  var baseName = this.lastName\n  name = name\n       ? ( baseName\n         ? baseName + \" \" + this.theme.subsection + \" \" + name\n         : null )\n       : baseName\n  this.show(name)\n  this.lastName = baseName\n}\n\nProgressBar.prototype.show = function(name, completed) {\n  name = this.lastName = name || this.lastName\n  completed = this.lastCompleted = completed || this.lastCompleted\n\n  if (!isTTY()) return\n  if (this.disabled) return\n  if (! this.spun && ! completed) return\n  if (this.tryAgain) {\n    clearTimeout(this.tryAgain)\n    this.tryAgain = null\n  }\n  var self = this\n  if (this.showing && new Date() - this.last < this.updatefreq) {\n    this.tryAgain = setTimeout(function () {\n      if (self.disabled) return\n      if (! self.spun && ! completed) return\n      drawBar()\n    }, this.updatefreq - (new Date() - this.last))\n    return\n  }\n\n  return drawBar()\n\n  function drawBar() {\n    var values = {\n      name: name,\n      spinner: self.spun,\n      completed: completed\n    }\n\n    self.last = new Date()\n\n    var statusline = self.renderTemplate(self.theme, self.template, values)\n\n    if (self.showing) self.cursor.up(1)\n    self.cursor\n        .hide()\n        .horizontalAbsolute(0)\n        .write(statusline.substr(0, getWritableTTYColumns()) + \"\\n\")\n        .show()\n\n    self.showing = true\n  }\n}\n\nProgressBar.prototype.renderTemplate = function (theme, template, values) {\n  values.startgroup = theme.startgroup\n  values.endgroup = theme.endgroup\n  values.spinner = values.spinner\n    ? theme.spinner.substr(values.spinner % theme.spinner.length,1)\n    : \"\"\n\n  var output = {prebar: \"\", postbar: \"\"}\n  var status = \"prebar\"\n  var self = this\n  template.forEach(function(T) {\n    if (typeof T === \"string\") {\n      output[status] += T\n      return\n    }\n    if (T.type === \"completionbar\") {\n      status = \"postbar\"\n      return\n    }\n    if (!values.hasOwnProperty(T.type)) throw new Error(\"Unknown template value '\"+T.type+\"'\")\n    var value = self.renderValue(T, values[T.type])\n    if (value === \"\") return\n    var sofar = output[status].length\n    var lastChar = sofar ? output[status][sofar-1] : null\n    if (T.separated && sofar && lastChar !== \" \") {\n      output[status] += \" \"\n    }\n    output[status] += value\n    if (T.separated) output[status] += \" \"\n  })\n\n  var bar = \"\"\n  if (status === \"postbar\") {\n    var nonBarLen = output.prebar.length + output.postbar.length\n\n    var barLen = getWritableTTYColumns() - nonBarLen\n    var sofar = Math.round(barLen * Math.max(0,Math.min(1,values.completed||0)))\n    var rest = barLen - sofar\n    bar = repeat(theme.complete, sofar)\n        + repeat(theme.incomplete, rest)\n  }\n\n  return output.prebar + bar + output.postbar\n}\nProgressBar.prototype.renderValue = function (template, value) {\n  if (value == null || value === \"\") return \"\"\n  var maxLength = template.maxLength || template.length\n  var minLength = template.minLength || template.length\n  var alignWith = align[template.align] || align.left\n//  if (maxLength) value = value.substr(-1 * maxLength)\n  if (maxLength) value = value.substr(0, maxLength)\n  if (minLength) value = alignWith(value, minLength)\n  return value\n}\n"]}