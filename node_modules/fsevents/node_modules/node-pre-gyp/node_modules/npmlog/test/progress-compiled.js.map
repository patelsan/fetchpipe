{"version":3,"sources":["progress.js"],"names":[],"mappings":"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","file":"progress-compiled.js","sourcesContent":["'use strict'\n\nvar test = require('tap').test\nvar log = require('../log.js')\n\nvar actions = []\nlog.gauge = {\n  enable: function () {\n    actions.push(['enable'])\n  },\n  disable: function () {\n    actions.push(['disable'])\n  },\n  hide: function () {\n    actions.push(['hide'])\n  },\n  show: function (name, completed) {\n    actions.push(['show', name, completed])\n  },\n  pulse: function (name) {\n    actions.push(['pulse', name])\n  }\n}\n\nfunction didActions(t, msg, output) {\n  var tests = []\n  for (var ii = 0; ii < output.length; ++ ii) {\n    for (var jj = 0; jj < output[ii].length; ++ jj) {\n      tests.push({cmd: ii, arg: jj})\n    }\n  }\n  t.is(actions.length, output.length, msg)\n  tests.forEach(function (test) {\n    t.is(actions[test.cmd] ? actions[test.cmd][test.arg] : null, \n         output[test.cmd][test.arg],\n         msg + ': ' + output[test.cmd] + (test.arg ? ' arg #'+test.arg : ''))\n  })\n  actions = []\n}\n\n\ntest('enableProgress', function (t) {\n  t.plan(6)\n  log.enableProgress()\n  didActions(t, 'enableProgress', [ [ 'enable' ], [ 'show', undefined, 0 ] ])\n  log.enableProgress()\n  didActions(t, 'enableProgress again', [])\n})\n\ntest('disableProgress', function (t) {\n  t.plan(4)\n  log.disableProgress()\n  didActions(t, 'disableProgress', [ [ 'hide' ], [ 'disable' ] ])\n  log.disableProgress()\n  didActions(t, 'disableProgress again', [])\n})\n\ntest('showProgress', function (t) {\n  t.plan(5)\n  log.showProgress('foo')\n  didActions(t, 'showProgress disabled', [])\n  log.enableProgress()\n  actions = []\n  log.showProgress('foo')\n  didActions(t, 'showProgress', [ [ 'show', 'foo', 0 ] ])\n})\n\ntest('clearProgress', function (t) {\n  t.plan(3)\n  log.clearProgress()\n  didActions(t, 'clearProgress', [ [ 'hide' ] ])\n  log.disableProgress()\n  actions = []\n  log.clearProgress()\n  didActions(t, 'clearProgress disabled', [ ])\n})\n\ntest(\"newItem\", function (t) {\n  t.plan(12)\n  log.enableProgress()\n  actions = []\n  var a = log.newItem(\"test\", 10)\n  didActions(t, \"newItem\", [ [ 'show', undefined, 0 ] ])\n  a.completeWork(5)\n  didActions(t, \"newItem:completeWork\", [ [ 'show', 'test', 0.5 ] ])\n  a.finish()\n  didActions(t, \"newItem:finish\", [ [ 'show', 'test', 1 ] ])\n})\n\n// test that log objects proxy through. And test that completion status filters up\ntest(\"newGroup\", function (t) {\n  t.plan(23)\n  var a = log.newGroup(\"newGroup\")\n  didActions(t, \"newGroup\", [ [ 'show', undefined, 0.5 ] ])\n  a.warn(\"test\", \"this is a test\")\n  didActions(t, \"newGroup:warn\", [ [ 'pulse', 'test' ], [ 'hide' ], [ 'show', undefined, 0.5 ] ])\n  var b = a.newItem(\"newGroup2\", 10)\n  didActions(t, \"newGroup:newItem\", [ [ 'show', 'newGroup', 0.5 ] ])\n  b.completeWork(5)\n  didActions(t, \"newGroup:completeWork\", [ [ 'show', 'newGroup2', 0.75 ] ])\n  a.finish()\n  didActions(t, \"newGroup:finish\", [ [ 'show', 'newGroup', 1 ] ])\n})\n\ntest(\"newStream\", function (t) {\n  t.plan(13)\n  var a = log.newStream(\"newStream\", 10)\n  didActions(t, \"newStream\", [ [ 'show', undefined, 0.6666666666666666 ] ])\n  a.write(\"abcde\")\n  didActions(t, \"newStream\", [ [ 'show', 'newStream', 0.8333333333333333 ] ])\n  a.write(\"fghij\")\n  didActions(t, \"newStream\", [ [ 'show', 'newStream', 1 ] ])\n  t.is(log.tracker.completed(), 1, \"Overall completion\")\n})\n"]}