{"version":3,"sources":["async.js"],"names":[],"mappings":"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","file":"async-compiled.js","sourcesContent":["\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = require(\"./schedule.js\");\nvar Queue = require(\"./queue.js\");\nvar util = require(\"./util.js\");\n\nfunction Async() {\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule =\n        schedule.isStatic ? schedule(this.drainQueues) : schedule;\n}\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.enableTrampoline = function() {\n    if (!this._trampolineEnabled) {\n        this._trampolineEnabled = true;\n        this._schedule = function(fn) {\n            setTimeout(fn, 0);\n        };\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._normalQueue.length() > 0;\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/m3OTXk\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    if (schedule.isStatic) {\n        schedule = function(fn) { setTimeout(fn, 0); };\n    }\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype.invokeFirst = function (fn, receiver, arg) {\n    this._normalQueue.unshift(fn, receiver, arg);\n    this._queueTick();\n};\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = new Async();\nmodule.exports.firstLineError = firstLineError;\n"]}