{"version":3,"sources":["cancel.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,MAAM,CAAC,OAAO,GAAG,UAAS,OAAO,EAAE;AACnC,QAAI,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AACpC,QAAI,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAClC,QAAI,iBAAiB,GAAG,MAAM,CAAC,iBAAiB,CAAC;;AAEjD,WAAO,CAAC,SAAS,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AAC1C,YAAI,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,OAAO,IAAI,CAAC;AACvC,YAAI,MAAM,CAAC;AACX,YAAI,eAAe,GAAG,IAAI,CAAC;AAC3B,eAAO,CAAC,MAAM,GAAG,eAAe,CAAC,mBAAmB,CAAA,KAAM,SAAS,IAC/D,MAAM,CAAC,aAAa,EAAE,EAAE;AACxB,2BAAe,GAAG,MAAM,CAAC;SAC5B;AACD,YAAI,CAAC,iBAAiB,EAAE,CAAC;AACzB,uBAAe,CAAC,OAAO,EAAE,CAAC,eAAe,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;KAClE,CAAC;;AAEF,WAAO,CAAC,SAAS,CAAC,MAAM,GAAG,UAAU,MAAM,EAAE;AACzC,YAAI,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,OAAO,IAAI,CAAC;AACvC,YAAI,MAAM,KAAK,SAAS,EAAE,MAAM,GAAG,IAAI,iBAAiB,EAAE,CAAC;AAC3D,aAAK,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;AAC9C,eAAO,IAAI,CAAC;KACf,CAAC;;AAEF,WAAO,CAAC,SAAS,CAAC,WAAW,GAAG,YAAY;AACxC,YAAI,IAAI,CAAC,YAAY,EAAE,EAAE,OAAO,IAAI,CAAC;AACrC,aAAK,CAAC,gBAAgB,EAAE,CAAC;AACzB,YAAI,CAAC,eAAe,EAAE,CAAC;AACvB,YAAI,CAAC,mBAAmB,GAAG,SAAS,CAAC;AACrC,eAAO,IAAI,CAAC;KACf,CAAC;;AAEF,WAAO,CAAC,SAAS,CAAC,aAAa,GAAG,YAAY;AAC1C,YAAI,GAAG,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;AACtB,WAAG,CAAC,iBAAiB,EAAE,CAAC;AACxB,eAAO,GAAG,CAAC;KACd,CAAC;;AAEF,WAAO,CAAC,SAAS,CAAC,IAAI,GAAG,UAAU,UAAU,EAAE,SAAS,EAAE,WAAW,EAAE;AACnE,YAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,SAAS,EAAE,WAAW,EAClC,SAAS,EAAE,SAAS,CAAC,CAAC;;AAE3C,WAAG,CAAC,eAAe,EAAE,CAAC;AACtB,WAAG,CAAC,mBAAmB,GAAG,SAAS,CAAC;AACpC,eAAO,GAAG,CAAC;KACd,CAAC;CACD,CAAC","file":"cancel-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise) {\nvar errors = require(\"./errors.js\");\nvar async = require(\"./async.js\");\nvar CancellationError = errors.CancellationError;\n\nPromise.prototype._cancel = function (reason) {\n    if (!this.isCancellable()) return this;\n    var parent;\n    var promiseToReject = this;\n    while ((parent = promiseToReject._cancellationParent) !== undefined &&\n        parent.isCancellable()) {\n        promiseToReject = parent;\n    }\n    this._unsetCancellable();\n    promiseToReject._target()._rejectCallback(reason, false, true);\n};\n\nPromise.prototype.cancel = function (reason) {\n    if (!this.isCancellable()) return this;\n    if (reason === undefined) reason = new CancellationError();\n    async.invokeLater(this._cancel, this, reason);\n    return this;\n};\n\nPromise.prototype.cancellable = function () {\n    if (this._cancellable()) return this;\n    async.enableTrampoline();\n    this._setCancellable();\n    this._cancellationParent = undefined;\n    return this;\n};\n\nPromise.prototype.uncancellable = function () {\n    var ret = this.then();\n    ret._unsetCancellable();\n    return ret;\n};\n\nPromise.prototype.fork = function (didFulfill, didReject, didProgress) {\n    var ret = this._then(didFulfill, didReject, didProgress,\n                         undefined, undefined);\n\n    ret._setCancellable();\n    ret._cancellationParent = undefined;\n    return ret;\n};\n};\n"]}