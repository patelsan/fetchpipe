{"version":3,"sources":["catch_filter.js"],"names":[],"mappings":"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","file":"catch_filter-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = require(\"./util.js\");\nvar errors = require(\"./errors.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar keys = require(\"./es5.js\").keys;\nvar TypeError = errors.TypeError;\n\nfunction CatchFilter(instances, callback, promise) {\n    this._instances = instances;\n    this._callback = callback;\n    this._promise = promise;\n}\n\nfunction safePredicate(predicate, e) {\n    var safeObject = {};\n    var retfilter = tryCatch(predicate).call(safeObject, e);\n\n    if (retfilter === errorObj) return retfilter;\n\n    var safeKeys = keys(safeObject);\n    if (safeKeys.length) {\n        errorObj.e = new TypeError(\"Catch filter must inherit from Error or be a simple predicate function\\u000a\\u000a    See http://goo.gl/o84o68\\u000a\");\n        return errorObj;\n    }\n    return retfilter;\n}\n\nCatchFilter.prototype.doFilter = function (e) {\n    var cb = this._callback;\n    var promise = this._promise;\n    var boundTo = promise._boundValue();\n    for (var i = 0, len = this._instances.length; i < len; ++i) {\n        var item = this._instances[i];\n        var itemIsErrorType = item === Error ||\n            (item != null && item.prototype instanceof Error);\n\n        if (itemIsErrorType && e instanceof item) {\n            var ret = tryCatch(cb).call(boundTo, e);\n            if (ret === errorObj) {\n                NEXT_FILTER.e = ret.e;\n                return NEXT_FILTER;\n            }\n            return ret;\n        } else if (typeof item === \"function\" && !itemIsErrorType) {\n            var shouldHandle = safePredicate(item, e);\n            if (shouldHandle === errorObj) {\n                e = errorObj.e;\n                break;\n            } else if (shouldHandle) {\n                var ret = tryCatch(cb).call(boundTo, e);\n                if (ret === errorObj) {\n                    NEXT_FILTER.e = ret.e;\n                    return NEXT_FILTER;\n                }\n                return ret;\n            }\n        }\n    }\n    NEXT_FILTER.e = e;\n    return NEXT_FILTER;\n};\n\nreturn CatchFilter;\n};\n"]}