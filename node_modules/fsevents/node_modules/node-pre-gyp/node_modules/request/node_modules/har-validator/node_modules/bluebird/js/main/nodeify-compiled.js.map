{"version":3,"sources":["nodeify.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,MAAM,CAAC,OAAO,GAAG,UAAS,OAAO,EAAE;AACnC,QAAI,IAAI,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAChC,QAAI,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAClC,QAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC7B,QAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;;AAE7B,aAAS,aAAa,CAAC,GAAG,EAAE,QAAQ,EAAE;AAClC,YAAI,OAAO,GAAG,IAAI,CAAC;AACnB,YAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,OAAO,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;AAC3E,YAAI,GAAG,GACH,QAAQ,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AACxE,YAAI,GAAG,KAAK,QAAQ,EAAE;AAClB,iBAAK,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SAC3B;KACJ;;AAED,aAAS,cAAc,CAAC,GAAG,EAAE,QAAQ,EAAE;AACnC,YAAI,OAAO,GAAG,IAAI,CAAC;AACnB,YAAI,QAAQ,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;AACrC,YAAI,GAAG,GAAG,GAAG,KAAK,SAAS,GACrB,QAAQ,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,GACvC,QAAQ,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;AACnD,YAAI,GAAG,KAAK,QAAQ,EAAE;AAClB,iBAAK,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SAC3B;KACJ;AACD,aAAS,YAAY,CAAC,MAAM,EAAE,QAAQ,EAAE;AACpC,YAAI,OAAO,GAAG,IAAI,CAAC;AACnB,YAAI,CAAC,MAAM,EAAE;AACT,gBAAI,MAAM,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;AAC/B,gBAAI,SAAS,GAAG,MAAM,CAAC,qBAAqB,EAAE,CAAC;AAC/C,qBAAS,CAAC,KAAK,GAAG,MAAM,CAAC;AACzB,kBAAM,GAAG,SAAS,CAAC;SACtB;AACD,YAAI,GAAG,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,MAAM,CAAC,CAAC;AACjE,YAAI,GAAG,KAAK,QAAQ,EAAE;AAClB,iBAAK,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SAC3B;KACJ;;AAED,WAAO,CAAC,SAAS,CAAC,UAAU,GAC5B,OAAO,CAAC,SAAS,CAAC,OAAO,GAAG,UAAU,QAAQ,EAAE,OAAO,EAAE;AACrD,YAAI,OAAO,QAAQ,IAAI,UAAU,EAAE;AAC/B,gBAAI,OAAO,GAAG,cAAc,CAAC;AAC7B,gBAAI,OAAO,KAAK,SAAS,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE;AACjD,uBAAO,GAAG,aAAa,CAAC;aAC3B;AACD,gBAAI,CAAC,KAAK,CACN,OAAO,EACP,YAAY,EACZ,SAAS,EACT,IAAI,EACJ,QAAQ,CACX,CAAC;SACL;AACD,eAAO,IAAI,CAAC;KACf,CAAC;CACD,CAAC","file":"nodeify-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise) {\nvar util = require(\"./util.js\");\nvar async = require(\"./async.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var target = promise._target();\n        var newReason = target._getCarriedStackTrace();\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback =\nPromise.prototype.nodeify = function (nodeback, options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n"]}