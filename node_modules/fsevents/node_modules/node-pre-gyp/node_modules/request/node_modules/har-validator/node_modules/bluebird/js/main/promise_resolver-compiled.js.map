{"version":3,"sources":["promise_resolver.js"],"names":[],"mappings":"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","file":"promise_resolver-compiled.js","sourcesContent":["\"use strict\";\nvar util = require(\"./util.js\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = require(\"./errors.js\");\nvar TimeoutError = errors.TimeoutError;\nvar OperationalError = errors.OperationalError;\nvar haveGetters = util.haveGetters;\nvar es5 = require(\"./es5.js\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise) {\n    return function(err, value) {\n        if (promise === null) return;\n\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (arguments.length > 2) {\n            var $_len = arguments.length;var args = new Array($_len - 1); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];}\n            promise._fulfill(args);\n        } else {\n            promise._fulfill(value);\n        }\n\n        promise = null;\n    };\n}\n\n\nvar PromiseResolver;\nif (!haveGetters) {\n    PromiseResolver = function (promise) {\n        this.promise = promise;\n        this.asCallback = nodebackForPromise(promise);\n        this.callback = this.asCallback;\n    };\n}\nelse {\n    PromiseResolver = function (promise) {\n        this.promise = promise;\n    };\n}\nif (haveGetters) {\n    var prop = {\n        get: function() {\n            return nodebackForPromise(this.promise);\n        }\n    };\n    es5.defineProperty(PromiseResolver.prototype, \"asCallback\", prop);\n    es5.defineProperty(PromiseResolver.prototype, \"callback\", prop);\n}\n\nPromiseResolver._nodebackForPromise = nodebackForPromise;\n\nPromiseResolver.prototype.toString = function () {\n    return \"[object PromiseResolver]\";\n};\n\nPromiseResolver.prototype.resolve =\nPromiseResolver.prototype.fulfill = function (value) {\n    if (!(this instanceof PromiseResolver)) {\n        throw new TypeError(\"Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\u000a\\u000a    See http://goo.gl/sdkXL9\\u000a\");\n    }\n    this.promise._resolveCallback(value);\n};\n\nPromiseResolver.prototype.reject = function (reason) {\n    if (!(this instanceof PromiseResolver)) {\n        throw new TypeError(\"Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\u000a\\u000a    See http://goo.gl/sdkXL9\\u000a\");\n    }\n    this.promise._rejectCallback(reason);\n};\n\nPromiseResolver.prototype.progress = function (value) {\n    if (!(this instanceof PromiseResolver)) {\n        throw new TypeError(\"Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\u000a\\u000a    See http://goo.gl/sdkXL9\\u000a\");\n    }\n    this.promise._progress(value);\n};\n\nPromiseResolver.prototype.cancel = function (err) {\n    this.promise.cancel(err);\n};\n\nPromiseResolver.prototype.timeout = function () {\n    this.reject(new TimeoutError(\"timeout\"));\n};\n\nPromiseResolver.prototype.isResolved = function () {\n    return this.promise.isResolved();\n};\n\nPromiseResolver.prototype.toJSON = function () {\n    return this.promise.toJSON();\n};\n\nmodule.exports = PromiseResolver;\n"]}