{"version":3,"sources":["some.js"],"names":[],"mappings":"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","file":"some-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = require(\"./util.js\");\nvar RangeError = require(\"./errors.js\").RangeError;\nvar AggregateError = require(\"./errors.js\").AggregateError;\nvar isArray = util.isArray;\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n    }\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            e.push(this._values[i]);\n        }\n        this._reject(e);\n    }\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/1wAmHx\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n"]}