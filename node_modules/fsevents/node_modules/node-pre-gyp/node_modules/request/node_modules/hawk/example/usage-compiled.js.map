{"version":3,"sources":["usage.js"],"names":[],"mappings":";;;;AAEA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,IAAI,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;;;AAK7B,IAAI,SAAS,GAAG;AACZ,eAAW,EAAE;AACT,oBAAY,EAAE;AACV,cAAE,EAAE,cAAc;AAClB,eAAG,EAAE,6CAA6C;AAClD,qBAAS,EAAE,QAAQ;AACnB,gBAAI,EAAE,OAAO;SAChB;KACJ;CACJ,CAAC;;;;AAKF,IAAI,eAAe,GAAG,SAAlB,eAAe,CAAa,EAAE,EAAE,QAAQ,EAAE;;AAE1C,WAAO,QAAQ,CAAC,IAAI,EAAE,SAAS,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;CACpD,CAAC;;;;AAKF,IAAI,OAAO,GAAG,SAAV,OAAO,CAAa,GAAG,EAAE,GAAG,EAAE;;AAE9B,QAAI,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,EAAE,eAAe,EAAE,EAAE,EAAE,UAAU,GAAG,EAAE,WAAW,EAAE,SAAS,EAAE;;AAEtF,YAAI,OAAO,GAAI,CAAC,GAAG,GAAG,QAAQ,GAAG,WAAW,CAAC,IAAI,GAAG,GAAG,GAAG,SAAS,CAAC,GAAG,GAAG,SAAS,AAAC,CAAC;AACrF,YAAI,OAAO,GAAG;AACV,0BAAc,EAAE,YAAY;AAC5B,kCAAsB,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,YAAY,EAAE,CAAC;SACtH,CAAC;;AAEF,WAAG,CAAC,SAAS,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,OAAO,CAAC,CAAC;AACzC,WAAG,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;KACpB,CAAC,CAAC;CACN,CAAC;;AAEF,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;;;;AAKrD,OAAO,CAAC,0CAA0C,EAAE,UAAU,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE;;AAEjF,WAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;CAClD,CAAC,CAAC;;;;AAKH,eAAe,CAAC,cAAc,EAAE,UAAU,GAAG,EAAE,WAAW,EAAE;;AAExD,QAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,0CAA0C,EAAE,KAAK,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,EAAE,cAAc,EAAE,CAAC,CAAC;AACtI,QAAI,OAAO,GAAG;AACV,WAAG,EAAE,0CAA0C;AAC/C,cAAM,EAAE,KAAK;AACb,eAAO,EAAE;AACL,yBAAa,EAAE,MAAM,CAAC,KAAK;SAC9B;KACJ,CAAC;;AAEF,WAAO,CAAC,OAAO,EAAE,UAAU,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE;;AAE9C,YAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AACnG,eAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,GAAG,IAAI,IAAI,OAAO,GAAG,UAAU,GAAG,YAAY,CAAA,AAAC,CAAC,CAAC;AACvF,eAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACnB,CAAC,CAAC;CACN,CAAC,CAAC","file":"usage-compiled.js","sourcesContent":["// Load modules\n\nvar Http = require('http');\nvar Request = require('request');\nvar Hawk = require('../lib');\n\n\n// Declare internals\n\nvar internals = {\n    credentials: {\n        dh37fgj492je: {\n            id: 'dh37fgj492je',                                             // Required by Hawk.client.header\n            key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n            algorithm: 'sha256',\n            user: 'Steve'\n        }\n    }\n};\n\n\n// Credentials lookup function\n\nvar credentialsFunc = function (id, callback) {\n\n    return callback(null, internals.credentials[id]);\n};\n\n\n// Create HTTP server\n\nvar handler = function (req, res) {\n\n    Hawk.server.authenticate(req, credentialsFunc, {}, function (err, credentials, artifacts) {\n\n        var payload = (!err ? 'Hello ' + credentials.user + ' ' + artifacts.ext : 'Shoosh!');\n        var headers = {\n            'Content-Type': 'text/plain',\n            'Server-Authorization': Hawk.server.header(credentials, artifacts, { payload: payload, contentType: 'text/plain' })\n        };\n\n        res.writeHead(!err ? 200 : 401, headers);\n        res.end(payload);\n    });\n};\n\nHttp.createServer(handler).listen(8000, '127.0.0.1');\n\n\n// Send unauthenticated request\n\nRequest('http://127.0.0.1:8000/resource/1?b=1&a=2', function (error, response, body) {\n\n    console.log(response.statusCode + ': ' + body);\n});\n\n\n// Send authenticated request\n\ncredentialsFunc('dh37fgj492je', function (err, credentials) {\n\n    var header = Hawk.client.header('http://127.0.0.1:8000/resource/1?b=1&a=2', 'GET', { credentials: credentials, ext: 'and welcome!' });\n    var options = {\n        uri: 'http://127.0.0.1:8000/resource/1?b=1&a=2',\n        method: 'GET',\n        headers: {\n            authorization: header.field\n        }\n    };\n\n    Request(options, function (error, response, body) {\n\n        var isValid = Hawk.client.authenticate(response, credentials, header.artifacts, { payload: body });\n        console.log(response.statusCode + ': ' + body + (isValid ? ' (valid)' : ' (invalid)'));\n        process.exit(0);\n    });\n});\n\n"]}