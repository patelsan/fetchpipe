{"version":3,"sources":["server.js"],"names":[],"mappings":"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","file":"server-compiled.js","sourcesContent":["// Load modules\n\nvar Url = require('url');\nvar Code = require('code');\nvar Hawk = require('../lib');\nvar Hoek = require('hoek');\nvar Lab = require('lab');\n\n\n// Declare internals\n\nvar internals = {};\n\n\n// Test shortcuts\n\nvar lab = exports.lab = Lab.script();\nvar describe = lab.experiment;\nvar it = lab.test;\nvar expect = Code.expect;\n\n\ndescribe('Server', function () {\n\n    var credentialsFunc = function (id, callback) {\n\n        var credentials = {\n            id: id,\n            key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n            algorithm: (id === '1' ? 'sha1' : 'sha256'),\n            user: 'steve'\n        };\n\n        return callback(null, credentials);\n    };\n\n    describe('authenticate()', function () {\n\n        it('parses a valid authentication header (sha1)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"1\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"zy79QQ5/EYFmQqutVnYb73gAc/U=\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.not.exist();\n                expect(credentials.user).to.equal('steve');\n                done();\n            });\n        });\n\n        it('parses a valid authentication header (sha256)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/1?b=1&a=2',\n                host: 'example.com',\n                port: 8000,\n                authorization: 'Hawk id=\"dh37fgj492je\", ts=\"1353832234\", nonce=\"j4h3g2\", mac=\"m8r1rHbXN6NgO+KIIhjO7sFRyd78RNGVUwehe8Cp2dU=\", ext=\"some-app-data\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353832234000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.not.exist();\n                expect(credentials.user).to.equal('steve');\n                done();\n            });\n        });\n\n        it('parses a valid authentication header (host override)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                headers: {\n                    host: 'example1.com:8080',\n                    authorization: 'Hawk id=\"1\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"zy79QQ5/EYFmQqutVnYb73gAc/U=\", ext=\"hello\"'\n                }\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { host: 'example.com', localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.not.exist();\n                expect(credentials.user).to.equal('steve');\n                done();\n            });\n        });\n\n        it('parses a valid authentication header (host port override)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                headers: {\n                    host: 'example1.com:80',\n                    authorization: 'Hawk id=\"1\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"zy79QQ5/EYFmQqutVnYb73gAc/U=\", ext=\"hello\"'\n                }\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { host: 'example.com', port: 8080, localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.not.exist();\n                expect(credentials.user).to.equal('steve');\n                done();\n            });\n        });\n\n        it('parses a valid authentication header (POST with payload)', function (done) {\n\n            var req = {\n                method: 'POST',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123456\", ts=\"1357926341\", nonce=\"1AwuJD\", hash=\"qAiXIVv+yjDATneWxZP2YCTa9aHRgQdnH9b3Wc+o3dg=\", ext=\"some-app-data\", mac=\"UeYcj5UoTVaAWXNvJfLVia7kU3VabxCqrccXP8sUGC4=\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1357926341000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.not.exist();\n                expect(credentials.user).to.equal('steve');\n                done();\n            });\n        });\n\n        it('errors on missing hash', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/1?b=1&a=2',\n                host: 'example.com',\n                port: 8000,\n                authorization: 'Hawk id=\"dh37fgj492je\", ts=\"1353832234\", nonce=\"j4h3g2\", mac=\"m8r1rHbXN6NgO+KIIhjO7sFRyd78RNGVUwehe8Cp2dU=\", ext=\"some-app-data\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { payload: 'body', localtimeOffsetMsec: 1353832234000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Missing required payload hash');\n                done();\n            });\n        });\n\n        it('errors on a stale timestamp', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123456\", ts=\"1362337299\", nonce=\"UzmxSs\", ext=\"some-app-data\", mac=\"wnNUxchvvryMH2RxckTdZ/gY3ijzvccx4keVvELC61w=\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, {}, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Stale timestamp');\n                var header = err.output.headers['WWW-Authenticate'];\n                var ts = header.match(/^Hawk ts\\=\\\"(\\d+)\\\"\\, tsm\\=\\\"([^\\\"]+)\\\"\\, error=\\\"Stale timestamp\\\"$/);\n                var now = Hawk.utils.now();\n                expect(parseInt(ts[1], 10) * 1000).to.be.within(now - 1000, now + 1000);\n\n                var res = {\n                    headers: {\n                        'www-authenticate': header\n                    }\n                };\n\n                expect(Hawk.client.authenticate(res, credentials, artifacts)).to.equal(true);\n                done();\n            });\n        });\n\n        it('errors on a replay', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"bXx7a7p1h9QYQNZ8x7QhvDQym8ACgab4m3lVSFn4DBw=\", ext=\"hello\"'\n            };\n\n            var memoryCache = {};\n            var options = {\n                localtimeOffsetMsec: 1353788437000 - Hawk.utils.now(),\n                nonceFunc: function (key, nonce, ts, callback) {\n\n                    if (memoryCache[key + nonce]) {\n                        return callback(new Error());\n                    }\n\n                    memoryCache[key + nonce] = true;\n                    return callback();\n                }\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, options, function (err, credentials, artifacts) {\n\n                expect(err).to.not.exist();\n                expect(credentials.user).to.equal('steve');\n\n                Hawk.server.authenticate(req, credentialsFunc, options, function (err, credentials, artifacts) {\n\n                    expect(err).to.exist();\n                    expect(err.output.payload.message).to.equal('Invalid nonce');\n                    done();\n                });\n            });\n        });\n\n        it('does not error on nonce collision if keys differ', function (done) {\n\n            var reqSteve = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"bXx7a7p1h9QYQNZ8x7QhvDQym8ACgab4m3lVSFn4DBw=\", ext=\"hello\"'\n            };\n\n            var reqBob = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"456\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"LXfmTnRzrLd9TD7yfH+4se46Bx6AHyhpM94hLCiNia4=\", ext=\"hello\"'\n            };\n\n            var credentialsFunc = function (id, callback) {\n\n                var credentials = {\n                    '123': {\n                        id: id,\n                        key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                        algorithm: (id === '1' ? 'sha1' : 'sha256'),\n                        user: 'steve'\n                    },\n                    '456': {\n                        id: id,\n                        key: 'xrunpaw3489ruxnpa98w4rxnwerxhqb98rpaxn39848',\n                        algorithm: (id === '1' ? 'sha1' : 'sha256'),\n                        user: 'bob'\n                    }\n                };\n\n                return callback(null, credentials[id]);\n            };\n\n            var memoryCache = {};\n            var options = {\n                localtimeOffsetMsec: 1353788437000 - Hawk.utils.now(),\n                nonceFunc: function (key, nonce, ts, callback) {\n\n                    if (memoryCache[key + nonce]) {\n                        return callback(new Error());\n                    }\n\n                    memoryCache[key + nonce] = true;\n                    return callback();\n                }\n            };\n\n            Hawk.server.authenticate(reqSteve, credentialsFunc, options, function (err, credentials, artifacts) {\n\n                expect(err).to.not.exist();\n                expect(credentials.user).to.equal('steve');\n\n                Hawk.server.authenticate(reqBob, credentialsFunc, options, function (err, credentials, artifacts) {\n\n                    expect(err).to.not.exist();\n                    expect(credentials.user).to.equal('bob');\n                    done();\n                });\n            });\n        });\n\n        it('errors on an invalid authentication header: wrong scheme', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Basic asdasdasdasd'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.not.exist();\n                done();\n            });\n        });\n\n        it('errors on an invalid authentication header: no scheme', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: '!@#'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Invalid header syntax');\n                done();\n            });\n        });\n\n        it('errors on an missing authorization header', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, {}, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.isMissing).to.equal(true);\n                done();\n            });\n        });\n\n        it('errors on an missing host header', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                headers: {\n                    authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n                }\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Invalid Host header');\n                done();\n            });\n        });\n\n        it('errors on an missing authorization attribute (id)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Missing attributes');\n                done();\n            });\n        });\n\n        it('errors on an missing authorization attribute (ts)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Missing attributes');\n                done();\n            });\n        });\n\n        it('errors on an missing authorization attribute (nonce)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Missing attributes');\n                done();\n            });\n        });\n\n        it('errors on an missing authorization attribute (mac)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Missing attributes');\n                done();\n            });\n        });\n\n        it('errors on an unknown authorization attribute', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", x=\"3\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Unknown attribute: x');\n                done();\n            });\n        });\n\n        it('errors on an bad authorization header format', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\\\\\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Bad header format');\n                done();\n            });\n        });\n\n        it('errors on an bad authorization attribute value', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"\\t\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Bad attribute value: id');\n                done();\n            });\n        });\n\n        it('errors on an empty authorization attribute value', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Bad attribute value: id');\n                done();\n            });\n        });\n\n        it('errors on duplicated authorization attribute key', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", id=\"456\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Duplicate attribute: id');\n                done();\n            });\n        });\n\n        it('errors on an invalid authorization header format', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk'\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Invalid header syntax');\n                done();\n            });\n        });\n\n        it('errors on an bad host header (missing host)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                headers: {\n                    host: ':8080',\n                    authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n                }\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Invalid Host header');\n                done();\n            });\n        });\n\n        it('errors on an bad host header (pad port)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                headers: {\n                    host: 'example.com:something',\n                    authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n                }\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Invalid Host header');\n                done();\n            });\n        });\n\n        it('errors on credentialsFunc error', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            var credentialsFunc = function (id, callback) {\n\n                return callback(new Error('Unknown user'));\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.message).to.equal('Unknown user');\n                done();\n            });\n        });\n\n        it('errors on credentialsFunc error (with credentials)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            var credentialsFunc = function (id, callback) {\n\n                return callback(new Error('Unknown user'), { some: 'value' });\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.message).to.equal('Unknown user');\n                expect(credentials.some).to.equal('value');\n                done();\n            });\n        });\n\n        it('errors on missing credentials', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            var credentialsFunc = function (id, callback) {\n\n                return callback(null, null);\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Unknown credentials');\n                done();\n            });\n        });\n\n        it('errors on invalid credentials (id)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            var credentialsFunc = function (id, callback) {\n\n                var credentials = {\n                    key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                    user: 'steve'\n                };\n\n                return callback(null, credentials);\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.message).to.equal('Invalid credentials');\n                expect(err.output.payload.message).to.equal('An internal server error occurred');\n                done();\n            });\n        });\n\n        it('errors on invalid credentials (key)', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            var credentialsFunc = function (id, callback) {\n\n                var credentials = {\n                    id: '23434d3q4d5345d',\n                    user: 'steve'\n                };\n\n                return callback(null, credentials);\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.message).to.equal('Invalid credentials');\n                expect(err.output.payload.message).to.equal('An internal server error occurred');\n                done();\n            });\n        });\n\n        it('errors on unknown credentials algorithm', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcUyW6EEgUH4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            var credentialsFunc = function (id, callback) {\n\n                var credentials = {\n                    key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                    algorithm: 'hmac-sha-0',\n                    user: 'steve'\n                };\n\n                return callback(null, credentials);\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.message).to.equal('Unknown algorithm');\n                expect(err.output.payload.message).to.equal('An internal server error occurred');\n                done();\n            });\n        });\n\n        it('errors on unknown bad mac', function (done) {\n\n            var req = {\n                method: 'GET',\n                url: '/resource/4?filter=a',\n                host: 'example.com',\n                port: 8080,\n                authorization: 'Hawk id=\"123\", ts=\"1353788437\", nonce=\"k3j4h2\", mac=\"/qwS4UjfVWMcU4jlr7T/wuKe3dKijvTvSos=\", ext=\"hello\"'\n            };\n\n            var credentialsFunc = function (id, callback) {\n\n                var credentials = {\n                    key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                    algorithm: 'sha256',\n                    user: 'steve'\n                };\n\n                return callback(null, credentials);\n            };\n\n            Hawk.server.authenticate(req, credentialsFunc, { localtimeOffsetMsec: 1353788437000 - Hawk.utils.now() }, function (err, credentials, artifacts) {\n\n                expect(err).to.exist();\n                expect(err.output.payload.message).to.equal('Bad mac');\n                done();\n            });\n        });\n    });\n\n    describe('header()', function () {\n\n        it('generates header', function (done) {\n\n            var credentials = {\n                id: '123456',\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                algorithm: 'sha256',\n                user: 'steve'\n            };\n\n            var artifacts = {\n                method: 'POST',\n                host: 'example.com',\n                port: '8080',\n                resource: '/resource/4?filter=a',\n                ts: '1398546787',\n                nonce: 'xUwusx',\n                hash: 'nJjkVtBE5Y/Bk38Aiokwn0jiJxt/0S2WRSUwWLCf5xk=',\n                ext: 'some-app-data',\n                mac: 'dvIvMThwi28J61Jc3P0ryAhuKpanU63GXdx6hkmQkJA=',\n                id: '123456'\n            };\n\n            var header = Hawk.server.header(credentials, artifacts, { payload: 'some reply', contentType: 'text/plain', ext: 'response-specific' });\n            expect(header).to.equal('Hawk mac=\\\"n14wVJK4cOxAytPUMc5bPezQzuJGl5n7MYXhFQgEKsE=\\\", hash=\\\"f9cDF/TDm7TkYRLnGwRMfeDzT6LixQVLvrIKhh0vgmM=\\\", ext=\\\"response-specific\\\"');\n            done();\n        });\n\n        it('generates header (empty payload)', function (done) {\n\n            var credentials = {\n                id: '123456',\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                algorithm: 'sha256',\n                user: 'steve'\n            };\n\n            var artifacts = {\n                method: 'POST',\n                host: 'example.com',\n                port: '8080',\n                resource: '/resource/4?filter=a',\n                ts: '1398546787',\n                nonce: 'xUwusx',\n                hash: 'nJjkVtBE5Y/Bk38Aiokwn0jiJxt/0S2WRSUwWLCf5xk=',\n                ext: 'some-app-data',\n                mac: 'dvIvMThwi28J61Jc3P0ryAhuKpanU63GXdx6hkmQkJA=',\n                id: '123456'\n            };\n\n            var header = Hawk.server.header(credentials, artifacts, { payload: '', contentType: 'text/plain', ext: 'response-specific' });\n            expect(header).to.equal('Hawk mac=\\\"i8/kUBDx0QF+PpCtW860kkV/fa9dbwEoe/FpGUXowf0=\\\", hash=\\\"q/t+NNAkQZNlq/aAD6PlexImwQTxwgT2MahfTa9XRLA=\\\", ext=\\\"response-specific\\\"');\n            done();\n        });\n\n        it('generates header (pre calculated hash)', function (done) {\n\n            var credentials = {\n                id: '123456',\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                algorithm: 'sha256',\n                user: 'steve'\n            };\n\n            var artifacts = {\n                method: 'POST',\n                host: 'example.com',\n                port: '8080',\n                resource: '/resource/4?filter=a',\n                ts: '1398546787',\n                nonce: 'xUwusx',\n                hash: 'nJjkVtBE5Y/Bk38Aiokwn0jiJxt/0S2WRSUwWLCf5xk=',\n                ext: 'some-app-data',\n                mac: 'dvIvMThwi28J61Jc3P0ryAhuKpanU63GXdx6hkmQkJA=',\n                id: '123456'\n            };\n\n            var options = { payload: 'some reply', contentType: 'text/plain', ext: 'response-specific' };\n            options.hash = Hawk.crypto.calculatePayloadHash(options.payload, credentials.algorithm, options.contentType);\n            var header = Hawk.server.header(credentials, artifacts, options);\n            expect(header).to.equal('Hawk mac=\\\"n14wVJK4cOxAytPUMc5bPezQzuJGl5n7MYXhFQgEKsE=\\\", hash=\\\"f9cDF/TDm7TkYRLnGwRMfeDzT6LixQVLvrIKhh0vgmM=\\\", ext=\\\"response-specific\\\"');\n            done();\n        });\n\n        it('generates header (null ext)', function (done) {\n\n            var credentials = {\n                id: '123456',\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                algorithm: 'sha256',\n                user: 'steve'\n            };\n\n            var artifacts = {\n                method: 'POST',\n                host: 'example.com',\n                port: '8080',\n                resource: '/resource/4?filter=a',\n                ts: '1398546787',\n                nonce: 'xUwusx',\n                hash: 'nJjkVtBE5Y/Bk38Aiokwn0jiJxt/0S2WRSUwWLCf5xk=',\n                mac: 'dvIvMThwi28J61Jc3P0ryAhuKpanU63GXdx6hkmQkJA=',\n                id: '123456'\n            };\n\n            var header = Hawk.server.header(credentials, artifacts, { payload: 'some reply', contentType: 'text/plain', ext: null });\n            expect(header).to.equal('Hawk mac=\\\"6PrybJTJs20jsgBw5eilXpcytD8kUbaIKNYXL+6g0ns=\\\", hash=\\\"f9cDF/TDm7TkYRLnGwRMfeDzT6LixQVLvrIKhh0vgmM=\\\"');\n            done();\n        });\n\n        it('errors on missing artifacts', function (done) {\n\n            var credentials = {\n                id: '123456',\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                algorithm: 'sha256',\n                user: 'steve'\n            };\n\n            var header = Hawk.server.header(credentials, null, { payload: 'some reply', contentType: 'text/plain', ext: 'response-specific' });\n            expect(header).to.equal('');\n            done();\n        });\n\n        it('errors on invalid artifacts', function (done) {\n\n            var credentials = {\n                id: '123456',\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                algorithm: 'sha256',\n                user: 'steve'\n            };\n\n            var header = Hawk.server.header(credentials, 5, { payload: 'some reply', contentType: 'text/plain', ext: 'response-specific' });\n            expect(header).to.equal('');\n            done();\n        });\n\n        it('errors on missing credentials', function (done) {\n\n            var artifacts = {\n                method: 'POST',\n                host: 'example.com',\n                port: '8080',\n                resource: '/resource/4?filter=a',\n                ts: '1398546787',\n                nonce: 'xUwusx',\n                hash: 'nJjkVtBE5Y/Bk38Aiokwn0jiJxt/0S2WRSUwWLCf5xk=',\n                ext: 'some-app-data',\n                mac: 'dvIvMThwi28J61Jc3P0ryAhuKpanU63GXdx6hkmQkJA=',\n                id: '123456'\n            };\n\n            var header = Hawk.server.header(null, artifacts, { payload: 'some reply', contentType: 'text/plain', ext: 'response-specific' });\n            expect(header).to.equal('');\n            done();\n        });\n\n        it('errors on invalid credentials (key)', function (done) {\n\n            var credentials = {\n                id: '123456',\n                algorithm: 'sha256',\n                user: 'steve'\n            };\n\n            var artifacts = {\n                method: 'POST',\n                host: 'example.com',\n                port: '8080',\n                resource: '/resource/4?filter=a',\n                ts: '1398546787',\n                nonce: 'xUwusx',\n                hash: 'nJjkVtBE5Y/Bk38Aiokwn0jiJxt/0S2WRSUwWLCf5xk=',\n                ext: 'some-app-data',\n                mac: 'dvIvMThwi28J61Jc3P0ryAhuKpanU63GXdx6hkmQkJA=',\n                id: '123456'\n            };\n\n            var header = Hawk.server.header(credentials, artifacts, { payload: 'some reply', contentType: 'text/plain', ext: 'response-specific' });\n            expect(header).to.equal('');\n            done();\n        });\n\n        it('errors on invalid algorithm', function (done) {\n\n            var credentials = {\n                id: '123456',\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                algorithm: 'x',\n                user: 'steve'\n            };\n\n            var artifacts = {\n                method: 'POST',\n                host: 'example.com',\n                port: '8080',\n                resource: '/resource/4?filter=a',\n                ts: '1398546787',\n                nonce: 'xUwusx',\n                hash: 'nJjkVtBE5Y/Bk38Aiokwn0jiJxt/0S2WRSUwWLCf5xk=',\n                ext: 'some-app-data',\n                mac: 'dvIvMThwi28J61Jc3P0ryAhuKpanU63GXdx6hkmQkJA=',\n                id: '123456'\n            };\n\n            var header = Hawk.server.header(credentials, artifacts, { payload: 'some reply', contentType: 'text/plain', ext: 'response-specific' });\n            expect(header).to.equal('');\n            done();\n        });\n    });\n\n    describe('authenticateMessage()', function () {\n\n        it('errors on invalid authorization (ts)', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                delete auth.ts;\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Invalid authorization');\n                    done();\n                });\n            });\n        });\n\n        it('errors on invalid authorization (nonce)', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                delete auth.nonce;\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Invalid authorization');\n                    done();\n                });\n            });\n        });\n\n        it('errors on invalid authorization (hash)', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                delete auth.hash;\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Invalid authorization');\n                    done();\n                });\n            });\n        });\n\n        it('errors with credentials', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, function (id, callback) {\n\n                    callback(new Error('something'), { some: 'value' });\n                }, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('something');\n                    expect(credentials.some).to.equal('value');\n                    done();\n                });\n            });\n        });\n\n        it('errors on nonce collision', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {\n                    nonceFunc: function (key, nonce, ts, nonceCallback) {\n\n                        nonceCallback(true);\n                    }\n                }, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Invalid nonce');\n                    done();\n                });\n            });\n        });\n\n        var credentialsFunc = function (id, callback) {\n\n            var credentials = {\n                id: id,\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\n                algorithm: (id === '1' ? 'sha1' : 'sha256'),\n                user: 'steve'\n            };\n\n            return callback(null, credentials);\n        };\n\n        it('should generate an authorization then successfully parse it', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {}, function (err, credentials) {\n\n                    expect(err).to.not.exist();\n                    expect(credentials.user).to.equal('steve');\n                    done();\n                });\n            });\n        });\n\n        it('should fail authorization on mismatching host', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n\n                Hawk.server.authenticateMessage('example1.com', 8080, 'some message', auth, credentialsFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Bad mac');\n                    done();\n                });\n            });\n        });\n\n        it('should fail authorization on stale timestamp', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, { localtimeOffsetMsec: 100000 }, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Stale timestamp');\n                    done();\n                });\n            });\n        });\n\n        it('overrides timestampSkewSec', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials, localtimeOffsetMsec: 100000 });\n                expect(auth).to.exist();\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, { timestampSkewSec: 500 }, function (err, credentials) {\n\n                    expect(err).to.not.exist();\n                    done();\n                });\n            });\n        });\n\n        it('should fail authorization on invalid authorization', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n                delete auth.id;\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Invalid authorization');\n                    done();\n                });\n            });\n        });\n\n        it('should fail authorization on bad hash', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message1', auth, credentialsFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Bad message hash');\n                    done();\n                });\n            });\n        });\n\n        it('should fail authorization on nonce error', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {\n                    nonceFunc: function (key, nonce, ts, callback) {\n\n                        callback(new Error('kaboom'));\n                    }\n                }, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Invalid nonce');\n                    done();\n                });\n            });\n        });\n\n        it('should fail authorization on credentials error', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n\n                var errFunc = function (id, callback) {\n\n                    callback(new Error('kablooey'));\n                };\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, errFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('kablooey');\n                    done();\n                });\n            });\n        });\n\n        it('should fail authorization on missing credentials', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n\n                var errFunc = function (id, callback) {\n\n                    callback();\n                };\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, errFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Unknown credentials');\n                    done();\n                });\n            });\n        });\n\n        it('should fail authorization on invalid credentials', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n\n                var errFunc = function (id, callback) {\n\n                    callback(null, {});\n                };\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, errFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Invalid credentials');\n                    done();\n                });\n            });\n        });\n\n        it('should fail authorization on invalid credentials algorithm', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials });\n                expect(auth).to.exist();\n\n                var errFunc = function (id, callback) {\n\n                    callback(null, { key: '123', algorithm: '456' });\n                };\n\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, errFunc, {}, function (err, credentials) {\n\n                    expect(err).to.exist();\n                    expect(err.message).to.equal('Unknown algorithm');\n                    done();\n                });\n            });\n        });\n\n        it('should fail on missing host', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var auth = Hawk.client.message(null, 8080, 'some message', { credentials: credentials });\n                expect(auth).to.not.exist();\n                done();\n            });\n        });\n\n        it('should fail on missing credentials', function (done) {\n\n            var auth = Hawk.client.message('example.com', 8080, 'some message', {});\n            expect(auth).to.not.exist();\n            done();\n        });\n\n        it('should fail on invalid algorithm', function (done) {\n\n            credentialsFunc('123456', function (err, credentials) {\n\n                var creds = Hoek.clone(credentials);\n                creds.algorithm = 'blah';\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: creds });\n                expect(auth).to.not.exist();\n                done();\n            });\n        });\n    });\n\n    describe('authenticatePayloadHash()', function () {\n\n        it('checks payload hash', function (done) {\n\n            expect(Hawk.server.authenticatePayloadHash('abcdefg', { hash: 'abcdefg' })).to.equal(true);\n            expect(Hawk.server.authenticatePayloadHash('1234567', { hash: 'abcdefg' })).to.equal(false);\n            done();\n        });\n    });\n});\n\n"]}