{"version":3,"sources":["extract.js"],"names":[],"mappings":"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","file":"extract-compiled.js","sourcesContent":["// Set the umask, so that it works the same everywhere.\nprocess.umask(parseInt('22', 8))\n\nvar tap = require(\"tap\")\n  , tar = require(\"../tar.js\")\n  , fs = require(\"fs\")\n  , path = require(\"path\")\n  , file = path.resolve(__dirname, \"fixtures/c.tar\")\n  , target = path.resolve(__dirname, \"tmp/extract-test\")\n  , index = 0\n  , fstream = require(\"fstream\")\n\n  , ee = 0\n  , expectEntries =\n[ { path: 'c.txt',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 513,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: 'cc.txt',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 513,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: 'r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h/cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 100,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: 'Ω.txt',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 2,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: 'Ω.txt',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 2,\n    linkpath: '',\n    nlink: 1,\n    dev: 234881026,\n    ino: 51693379 },\n  { path: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 200,\n    linkpath: '',\n    nlink: 1,\n    dev: 234881026,\n    ino: 51681874 },\n  { path: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 201,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: '200LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL',\n    mode: '777',\n    type: '2',\n    depth: undefined,\n    size: 0,\n    linkpath: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: '200-hard',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 200,\n    linkpath: '',\n    nlink: 2,\n    dev: 234881026,\n    ino: 51681874 },\n  { path: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '644',\n    type: '1',\n    depth: undefined,\n    size: 0,\n    linkpath: path.resolve(target, '200-hard'),\n    nlink: 2,\n    dev: 234881026,\n    ino: 51681874 } ]\n\n  , ef = 0\n  , expectFiles =\n[ { path: '',\n    mode: '40755',\n    type: 'Directory',\n    depth: 0,\n    linkpath: undefined },\n  { path: '/200-hard',\n    mode: '100644',\n    type: 'File',\n    depth: 1,\n    size: 200,\n    linkpath: undefined,\n    nlink: 2 },\n  { path: '/200LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL',\n    mode: '120777',\n    type: 'SymbolicLink',\n    depth: 1,\n    size: 200,\n    linkpath: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    nlink: 1 },\n  { path: '/200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '100644',\n    type: 'Link',\n    depth: 1,\n    size: 200,\n    linkpath: path.join(target, '200-hard'),\n    nlink: 2 },\n  { path: '/c.txt',\n    mode: '100644',\n    type: 'File',\n    depth: 1,\n    size: 513,\n    linkpath: undefined,\n    nlink: 1 },\n  { path: '/cc.txt',\n    mode: '100644',\n    type: 'File',\n    depth: 1,\n    size: 513,\n    linkpath: undefined,\n    nlink: 1 },\n  { path: '/r',\n    mode: '40755',\n    type: 'Directory',\n    depth: 1,\n    linkpath: undefined },\n  { path: '/r/e',\n    mode: '40755',\n    type: 'Directory',\n    depth: 2,\n    linkpath: undefined },\n  { path: '/r/e/a',\n    mode: '40755',\n    type: 'Directory',\n    depth: 3,\n    linkpath: undefined },\n  { path: '/r/e/a/l',\n    mode: '40755',\n    type: 'Directory',\n    depth: 4,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l',\n    mode: '40755',\n    type: 'Directory',\n    depth: 5,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y',\n    mode: '40755',\n    type: 'Directory',\n    depth: 6,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-',\n    mode: '40755',\n    type: 'Directory',\n    depth: 7,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d',\n    mode: '40755',\n    type: 'Directory',\n    depth: 8,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e',\n    mode: '40755',\n    type: 'Directory',\n    depth: 9,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e',\n    mode: '40755',\n    type: 'Directory',\n    depth: 10,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p',\n    mode: '40755',\n    type: 'Directory',\n    depth: 11,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-',\n    mode: '40755',\n    type: 'Directory',\n    depth: 12,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f',\n    mode: '40755',\n    type: 'Directory',\n    depth: 13,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o',\n    mode: '40755',\n    type: 'Directory',\n    depth: 14,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l',\n    mode: '40755',\n    type: 'Directory',\n    depth: 15,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d',\n    mode: '40755',\n    type: 'Directory',\n    depth: 16,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e',\n    mode: '40755',\n    type: 'Directory',\n    depth: 17,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r',\n    mode: '40755',\n    type: 'Directory',\n    depth: 18,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-',\n    mode: '40755',\n    type: 'Directory',\n    depth: 19,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p',\n    mode: '40755',\n    type: 'Directory',\n    depth: 20,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a',\n    mode: '40755',\n    type: 'Directory',\n    depth: 21,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t',\n    mode: '40755',\n    type: 'Directory',\n    depth: 22,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h',\n    mode: '40755',\n    type: 'Directory',\n    depth: 23,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h/cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '100644',\n    type: 'File',\n    depth: 24,\n    size: 100,\n    linkpath: undefined,\n    nlink: 1 },\n  { path: '/Ω.txt',\n    mode: '100644',\n    type: 'File',\n    depth: 1,\n    size: 2,\n    linkpath: undefined,\n    nlink: 1 } ]\n\n\n\n// The extract class basically just pipes the input\n// to a Reader, and then to a fstream.DirWriter\n\n// So, this is as much a test of fstream.Reader and fstream.Writer\n// as it is of tar.Extract, but it sort of makes sense.\n\ntap.test(\"preclean\", function (t) {\n  require(\"rimraf\").sync(__dirname + \"/tmp/extract-test\")\n  t.pass(\"cleaned!\")\n  t.end()\n})\n\ntap.test(\"extract test\", function (t) {\n  var extract = tar.Extract(target)\n  var inp = fs.createReadStream(file)\n\n  // give it a weird buffer size to try to break in odd places\n  inp.bufferSize = 1234\n\n  inp.pipe(extract)\n\n  extract.on(\"end\", function () {\n    t.equal(ee, expectEntries.length, \"should see \"+ee+\" entries\")\n\n    // should get no more entries after end\n    extract.removeAllListeners(\"entry\")\n    extract.on(\"entry\", function (e) {\n      t.fail(\"Should not get entries after end!\")\n    })\n\n    next()\n  })\n\n  extract.on(\"entry\", function (entry) {\n    var found =\n      { path: entry.path\n      , mode: entry.props.mode.toString(8)\n      , type: entry.props.type\n      , depth: entry.props.depth\n      , size: entry.props.size\n      , linkpath: entry.props.linkpath\n      , nlink: entry.props.nlink\n      , dev: entry.props.dev\n      , ino: entry.props.ino\n      }\n\n    var wanted = expectEntries[ee ++]\n\n    t.equivalent(found, wanted, \"tar entry \" + ee + \" \" + wanted.path)\n  })\n\n  function next () {\n    var r = fstream.Reader({ path: target\n                           , type: \"Directory\"\n                           // this is just to encourage consistency\n                           , sort: \"alpha\" })\n\n    r.on(\"ready\", function () {\n      foundEntry(r)\n    })\n\n    r.on(\"end\", finish)\n\n    function foundEntry (entry) {\n      var p = entry.path.substr(target.length)\n      var found =\n        { path: p\n        , mode: entry.props.mode.toString(8)\n        , type: entry.props.type\n        , depth: entry.props.depth\n        , size: entry.props.size\n        , linkpath: entry.props.linkpath\n        , nlink: entry.props.nlink\n        }\n\n      var wanted = expectFiles[ef ++]\n\n      t.has(found, wanted, \"unpacked file \" + ef + \" \" + wanted.path)\n\n      entry.on(\"entry\", foundEntry)\n    }\n\n    function finish () {\n      t.equal(ef, expectFiles.length, \"should have \"+ef+\" items\")\n      t.end()\n    }\n  }\n})\n"]}