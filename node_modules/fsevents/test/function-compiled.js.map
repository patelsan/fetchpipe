{"version":3,"sources":["function.js"],"names":[],"mappings":"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","file":"function-compiled.js","sourcesContent":["/*\n  Â© 2014 by Philipp Dunkel <pip@pipobscure.com>\n  Licensed under MIT License.\n */\n\n/* jshint node:true */\n'use strict';\n\nvar fs = require('fs');\nvar path = require('path');\nvar test = require('tap').test;\n\ntest('functionality testing', function(t) {\n  try {\n    fs.mkdirSync(__dirname + '/temp');\n  } catch (ex) {}\n  var evt = require('../')(__dirname + '/temp').start();\n  t.on('end', function() {\n    evt.stop();\n  });\n  t.plan(16);\n\n  evt.on('fsevent', function(name, flags, id) {\n    console.error(\"id:\\t\" + id);\n    console.error(\"flags:\\t\" + JSON.stringify(flags));\n    if (name === __dirname + '/temp') return;\n    if (path.basename(name) === 'created-fsevent') {\n      t.ok('number' === typeof flags, 'created file was caught with flags:' + flags);\n      t.ok('number' === typeof id, 'id is a number ' + id);\n    }\n    if (path.basename(name) === 'moved-fsevent') {\n      t.ok('number' === typeof flags, 'renamed file was caught with flags:' + flags);\n      t.ok('number' === typeof id, 'id is a number ' + id);\n    }\n  });\n\n  evt.on('change', function(name, info) {\n    console.error(\"name:\\t\" + name);\n    console.error(\"base:\\t\" + path.basename(name));\n    console.error(\"event:\\t\" + info.event);\n    console.error(\"info:\\t\" + JSON.stringify(info));\n    if (name === __dirname + '/temp') return;\n    t.ok(name === info.path, 'matched path');\n    switch (info.event) {\n      case 'created':\n      case 'modified':\n        // NOTE(bajtos) The recent versions apparently report `modified` event\n        // instead of `created`.\n        t.ok(path.basename(name) === 'created-fsevent', 'file created: ' + path.basename(name));\n        break;\n      case 'moved-out':\n        t.ok(path.basename(name) === 'created-fsevent', 'file moved out: ' + path.basename(name));\n        break;\n      case 'moved-in':\n        t.ok(path.basename(name) === 'moved-fsevent', 'file moved in: ' + path.basename(name));\n        break;\n      case 'deleted':\n        t.ok(path.basename(name) === 'moved-fsevent', 'file deleted: ' + path.basename(name));\n        break;\n      default:\n        t.ok(false, 'Uknown event type: ' + info.event);\n        break;\n    }\n  });\n\n  setTimeout(function() {\n    console.error(\"===========================================================================\");\n    console.error(\"\\twriteFileSync(__dirname + '/temp/created-fsevent', 'created-fsevent');\");\n    fs.writeFileSync(__dirname + '/temp/created-fsevent', 'created-fsevent');\n\n    console.error(\"===========================================================================\");\n  }, 500);\n  setTimeout(function() {\n    console.error(\"===========================================================================\");\n    console.error(\"\\trenameSync(__dirname + '/temp/created-fsevent', __dirname + '/temp/moved-fsevent');\");\n    fs.renameSync(__dirname + '/temp/created-fsevent', __dirname + '/temp/moved-fsevent');\n\n    console.error(\"===========================================================================\");\n\n  }, 1000);\n  setTimeout(function() {\n    console.error(\"===========================================================================\");\n    console.error(\"\\tunlinkSync(__dirname + '/temp/moved-fsevent');\");\n    fs.unlinkSync(__dirname + '/temp/moved-fsevent');\n    console.error(\"===========================================================================\");\n  }, 1500);\n  setTimeout(function() {\n    console.error(\"===========================================================================\");\n    console.error(\"\\trmdirSync(__dirname + '/temp');\");\n    fs.rmdirSync(__dirname + '/temp');\n    console.error(\"===========================================================================\");\n  }, 2000);\n});\n"]}