{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compiled.js","sourcesContent":["var assert = require(\"assert\");\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar file = path.join(__dirname, \"install.js\");\n\nexports.makeGlobal = function() {\n    require(\"./install\");\n};\n\nfunction Reader(file) {\n    var self = this;\n    assert.ok(self instanceof Reader);\n\n    var args;\n    var qhead = {};\n    var qtail = qhead;\n\n    fs.readFile(file, \"utf8\", function(err, data) {\n        args = [err, data];\n        process.nextTick(flush);\n    });\n\n    function flush() {\n        var next = qhead.next\n        if (next && args) {\n            qhead = next;\n            process.nextTick(flush);\n            next.cb.apply(null, args);\n        }\n    }\n\n    self.addCallback = function(cb) {\n        qtail = qtail.next = { cb: cb };\n        if (qhead.next === qtail)\n            process.nextTick(flush);\n    };\n}\n\nvar reader;\n\nexports.getCode = function(callback) {\n    reader = reader || new Reader(file);\n    reader.addCallback(callback);\n};\n\nfunction rename(installName, code) {\n    if (installName !== \"install\")\n        code = code.replace(\n            /\\bglobal\\.install\\b/g,\n            \"global.\" + installName);\n    return code;\n}\n\nexports.renameCode = function(installName, callback) {\n    reader = reader || new Reader(file);\n    reader.addCallback(function(err, data) {\n        callback(err, rename(installName, data));\n    });\n};\n\nfunction getCodeSync() {\n    return fs.readFileSync(file, \"utf8\");\n}\nexports.getCodeSync = getCodeSync;\n\nexports.renameCodeSync = function(installName) {\n    return rename(installName, getCodeSync());\n};\n\n// Not perfect, but we need to match the behavior of install.js.\nvar requireExp = /\\brequire\\(['\"]([^'\"]+)['\"]\\)/g;\n\n// This function should match the behavior of `ready` and `absolutize` in\n// install.js, but the implementations are not worth unifying because we have\n// access to the \"path\" module here.\nexports.getRequiredIDs = function(id, source) {\n    var match, seen = {}, ids = [];\n\n    requireExp.lastIndex = 0;\n    while ((match = requireExp.exec(source))) {\n        var rid = match[1];\n        if (rid.charAt(0) === \".\")\n            rid = path.normalize(path.join(id, \"..\", match[1]));\n\n        if (!seen.hasOwnProperty(rid)) {\n            seen[rid] = true;\n            ids.push(rid);\n        }\n    }\n\n    return ids;\n};\n"]}