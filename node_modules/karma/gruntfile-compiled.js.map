{"version":3,"sources":["gruntfile.js"],"names":[],"mappings":"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","file":"gruntfile-compiled.js","sourcesContent":["module.exports = function (grunt) {\n  grunt.initConfig({\n    pkg: grunt.file.readJSON('package.json'),\n    pkgFile: 'package.json',\n    files: {\n      server: ['lib/**/*.js'],\n      client: ['client/**/*.js'],\n      grunt: ['grunt.js', 'tasks/*.js'],\n      scripts: ['scripts/init-dev-env.js']\n    },\n    browserify: {\n      client: {\n        files: {\n          'static/karma.js': ['client/main.js']\n        }\n      }\n    },\n    test: {\n      unit: 'mochaTest:unit',\n      client: 'test/client/karma.conf.js',\n      e2e: 'cucumberjs:ci'\n    },\n    watch: {\n      client: {\n        files: '<%= files.client %>',\n        tasks: 'browserify:client'\n      }\n    },\n    mochaTest: {\n      options: {\n        require: [\n          'babel/register'\n        ],\n        reporter: 'dot',\n        ui: 'bdd',\n        quiet: false,\n        colors: true\n      },\n      unit: {\n        src: [\n          'test/unit/mocha-globals.js',\n          'test/unit/**/*.spec.js'\n        ]\n      }\n    },\n    cucumberjs: {\n      options: {\n        steps: 'test/e2e/steps',\n        format: 'progress'\n      },\n      all: 'test/e2e/*.feature',\n      current: {\n        files: {\n          src: 'test/e2e/*.feature'\n        },\n        options: {\n          tags: '@current'\n        }\n      },\n      ci: {\n        files: {\n          src: 'test/e2e/*.feature'\n        },\n        options: {\n          tags: '~@not-jenkins'\n        }\n      }\n    },\n    eslint: {\n      options: {\n        quiet: true\n      },\n      target: [\n        '<%= files.server %>',\n        '<%= files.grunt %>',\n        '<%= files.scripts %>',\n        '<%= files.client %>',\n        'test/**/*.js'\n      ]\n    },\n    'npm-publish': {\n      options: {\n        requires: ['build'],\n        abortIfDirty: true,\n        tag: function () {\n          var version = grunt.config('pkg.version')\n          if (version.match(/rc/)) {\n            return 'canary'\n          } else {\n            return 'latest'\n          }\n        }\n      }\n    },\n    'npm-contributors': {\n      options: {\n        commitMessage: 'chore: update contributors'\n      }\n    },\n    conventionalChangelog: {\n      release: {\n        options: {\n          changelogOpts: {\n            preset: 'angular'\n          }\n        },\n        src: 'CHANGELOG.md'\n      },\n    },\n    conventionalGithubReleaser: {\n      release: {\n        options: {\n          auth: {\n            type: 'oauth',\n            token: process.env.GH_TOKEN\n          },\n          changelogOpts: {\n            preset: 'angular'\n          }\n        }\n      }\n    },\n    bump: {\n      options: {\n        updateConfigs: ['pkg'],\n        commitFiles: [\n          'package.json',\n          'CHANGELOG.md'\n        ],\n        commitMessage: 'chore: release v%VERSION%',\n        prereleaseName: 'rc'\n      }\n    }\n  })\n\n  grunt.loadTasks('tasks')\n  require('load-grunt-tasks')(grunt)\n\n  grunt.registerTask('build', ['browserify:client'])\n  grunt.registerTask('default', ['build', 'test', 'lint'])\n  grunt.registerTask('lint', ['eslint'])\n\n  grunt.registerTask('release', 'Build, bump and publish to NPM.', function (type) {\n    grunt.task.run([\n      'npm-contributors',\n      'bump:' + (type || 'patch') + ':bump-only',\n      'build',\n      'conventionalChangelog',\n      'bump-commit',\n      'conventionalGithubReleaser',\n      'npm-publish'\n    ])\n  })\n}\n"]}