{"version":3,"sources":["capture_timeout.js"],"names":[],"mappings":";;AAAA,IAAI,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAA;;;;;AAKjD,IAAI,sBAAsB,GAAG,SAAzB,sBAAsB,CAAa,KAAK,EAAE,cAAc,EAAE;AAC5D,MAAI,CAAC,cAAc,EAAE;AACnB,WAAM;GACP;;AAED,MAAI,IAAI,GAAG,IAAI,CAAA;AACf,MAAI,gBAAgB,GAAG,IAAI,CAAA;;AAE3B,MAAI,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY;AAC3B,oBAAgB,GAAG,KAAK,CAAC,UAAU,CAAC,YAAY;AAC9C,sBAAgB,GAAG,IAAI,CAAA;AACvB,UAAI,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,oBAAoB,EAAE;AAC5C,eAAM;OACP;;AAED,SAAG,CAAC,IAAI,CAAC,yCAAyC,EAAE,IAAI,CAAC,IAAI,EAAE,cAAc,CAAC,CAAA;AAC9E,UAAI,CAAC,KAAK,GAAG,SAAS,CAAA;AACtB,UAAI,CAAC,IAAI,EAAE,CAAA;KACZ,EAAE,cAAc,CAAC,CAAA;GACnB,CAAC,CAAA;;AAEF,MAAI,CAAC,EAAE,CAAC,MAAM,EAAE,YAAY;AAC1B,QAAI,gBAAgB,EAAE;AACpB,WAAK,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAA;AACpC,sBAAgB,GAAG,IAAI,CAAA;KACxB;GACF,CAAC,CAAA;CACH,CAAA;;AAED,sBAAsB,CAAC,gBAAgB,GAAG,UAAU,KAAK;2BAC3B,cAAc,EAAE;AAC5C,SAAO,UAAU,QAAQ,EAAE;AACzB,0BAAsB,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,cAAc,CAAC,CAAA;GAC7D,CAAA;CACF,CAAA;;AAED,sBAAsB,CAAC,gBAAgB,CAAC,OAAO,GAAG,CAAC,OAAO,EAAE,uBAAuB,CAAC,CAAA;;AAEpF,MAAM,CAAC,OAAO,GAAG,sBAAsB,CAAA","file":"capture_timeout-compiled.js","sourcesContent":["var log = require('../logger').create('launcher')\n\n/**\n * Kill browser if it does not capture in given `captureTimeout`.\n */\nvar CaptureTimeoutLauncher = function (timer, captureTimeout) {\n  if (!captureTimeout) {\n    return\n  }\n\n  var self = this\n  var pendingTimeoutId = null\n\n  this.on('start', function () {\n    pendingTimeoutId = timer.setTimeout(function () {\n      pendingTimeoutId = null\n      if (self.state !== self.STATE_BEING_CAPTURED) {\n        return\n      }\n\n      log.warn('%s have not captured in %d ms, killing.', self.name, captureTimeout)\n      self.error = 'timeout'\n      self.kill()\n    }, captureTimeout)\n  })\n\n  this.on('done', function () {\n    if (pendingTimeoutId) {\n      timer.clearTimeout(pendingTimeoutId)\n      pendingTimeoutId = null\n    }\n  })\n}\n\nCaptureTimeoutLauncher.decoratorFactory = function (timer,\n  /* config.captureTimeout */ captureTimeout) {\n  return function (launcher) {\n    CaptureTimeoutLauncher.call(launcher, timer, captureTimeout)\n  }\n}\n\nCaptureTimeoutLauncher.decoratorFactory.$inject = ['timer', 'config.captureTimeout']\n\nmodule.exports = CaptureTimeoutLauncher\n"]}