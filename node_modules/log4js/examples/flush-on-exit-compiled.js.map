{"version":3,"sources":["flush-on-exit.js"],"names":[],"mappings":";;;;;;AAIA,IAAI,MAAM,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AACtC,MAAM,CAAC,SAAS,CAAC;AACX,aAAS,EAAE,CACT,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAC5D,EAAE,IAAI,EAAE,SAAS,EAAC,CACvB;CACF,CAAC,CAAC;;AAEH,IAAI,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;AACxC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;;AAExB,IAAI,IAAI,GAAC,OAAO,CAAC,MAAM,CAAC,CAAC;;AAEzB,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,UAAS,OAAO,EAAE,QAAQ,EAAC;AACtD,YAAQ,CAAC,SAAS,CAAC,GAAG,EAAE,EAAC,cAAc,EAAE,YAAY,EAAC,CAAC,CAAC;AACxD,QAAI,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC;AAC5B,UAAM,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,CAAC;AAC3B,YAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AACzB,QAAI,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,EAAC;AACrB,cAAM,CAAC,QAAQ,CAAC,YAAW;AAAE,mBAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAAE,CAAC,CAAC;KACpD;AACD,YAAQ,CAAC,GAAG,EAAE,CAAC;CAClB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC","file":"flush-on-exit-compiled.js","sourcesContent":["/**\n * run this, then \"ab -c 10 -n 100 localhost:4444/\" to test (in\n * another shell)\n */\nvar log4js = require('../lib/log4js');\nlog4js.configure({\n      appenders: [\n        { type: 'file', filename: 'cheese.log', category: 'cheese' },\n        { type: 'console'}\n  ]\n});\n\nvar logger = log4js.getLogger('cheese');\nlogger.setLevel('INFO');\n\nvar http=require('http');\n\nvar server = http.createServer(function(request, response){\n    response.writeHead(200, {'Content-Type': 'text/plain'});\n    var rd = Math.random() * 50;\n    logger.info(\"hello \" + rd);\n    response.write('hello ');\n    if (Math.floor(rd) == 30){\n        log4js.shutdown(function() { process.exit(1); });\n    }\n    response.end();\n}).listen(4444);\n"]}