{"version":3,"sources":["logging-test.js"],"names":[],"mappings":"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","file":"logging-test-compiled.js","sourcesContent":["\"use strict\";\nvar vows = require('vows')\n, assert = require('assert')\n, sandbox = require('sandboxed-module');\n\nfunction setupConsoleTest() {\n  var fakeConsole = {}\n  , logEvents = []\n  , log4js;\n  \n  ['trace','debug','log','info','warn','error'].forEach(function(fn) {\n    fakeConsole[fn] = function() {\n      throw new Error(\"this should not be called.\");\n    };\n  });\n\n  log4js = sandbox.require(\n    '../lib/log4js', \n    {\n      globals: {\n        console: fakeConsole\n      }\n    }\n  );\n\n  log4js.clearAppenders();\n  log4js.addAppender(function(evt) {\n    logEvents.push(evt);\n  });\n\n  return { log4js: log4js, logEvents: logEvents, fakeConsole: fakeConsole };\n}\n\nvows.describe('log4js').addBatch({\n\n    'getBufferedLogger': {\n        topic: function () {\n            var log4js = require('../lib/log4js');\n            log4js.clearAppenders();\n            var logger = log4js.getBufferedLogger('tests');\n            return logger;\n        },\n\n        'should take a category and return a logger': function (logger) {\n            assert.equal(logger.target.category, 'tests');\n            assert.isFunction(logger.flush);\n            assert.isFunction(logger.trace);\n            assert.isFunction(logger.debug);\n            assert.isFunction(logger.info);\n            assert.isFunction(logger.warn);\n            assert.isFunction(logger.error);\n            assert.isFunction(logger.fatal);\n        },\n\n        'cache events': {\n            topic: function () {\n                var log4js = require('../lib/log4js');\n                log4js.clearAppenders();\n                var logger = log4js.getBufferedLogger('tests1');\n                var events = [];\n                logger.target.addListener(\"log\", function (logEvent) { events.push(logEvent); });\n                logger.debug(\"Debug event\");\n                logger.trace(\"Trace event 1\");\n                logger.trace(\"Trace event 2\");\n                logger.warn(\"Warning event\");\n                logger.error(\"Aargh!\", new Error(\"Pants are on fire!\"));\n                logger.error(\"Simulated CouchDB problem\", { err: 127, cause: \"incendiary underwear\" });\n                return events;\n            },\n\n            'should not emit log events if .flush() is not called.': function (events) {\n                assert.equal(events.length, 0);\n            }\n        },\n\n        'log events after flush() is called': {\n            topic: function () {\n                var log4js = require('../lib/log4js');\n                log4js.clearAppenders();\n                var logger = log4js.getBufferedLogger('tests2');\n                logger.target.setLevel(\"TRACE\");\n                var events = [];\n                logger.target.addListener(\"log\", function (logEvent) { events.push(logEvent); });\n                logger.debug(\"Debug event\");\n                logger.trace(\"Trace event 1\");\n                logger.trace(\"Trace event 2\");\n                logger.warn(\"Warning event\");\n                logger.error(\"Aargh!\", new Error(\"Pants are on fire!\"));\n                logger.error(\"Simulated CouchDB problem\", { err: 127, cause: \"incendiary underwear\" });\n                logger.flush();\n                return events;\n            },\n\n            'should emit log events when .flush() is called.': function (events) {\n                assert.equal(events.length, 6);\n            }\n        }\n    }, \n    \n   \n  'getLogger': {\n    topic: function() {\n      var log4js = require('../lib/log4js');\n      log4js.clearAppenders();\n      var logger = log4js.getLogger('tests');\n      logger.setLevel(\"DEBUG\");\n      return logger;\n    },\n    \n    'should take a category and return a logger': function(logger) {\n      assert.equal(logger.category, 'tests');\n      assert.equal(logger.level.toString(), \"DEBUG\");\n      assert.isFunction(logger.debug);\n      assert.isFunction(logger.info);\n      assert.isFunction(logger.warn);\n      assert.isFunction(logger.error);\n      assert.isFunction(logger.fatal);\n    },\n\n    'log events' : {\n      topic: function(logger) {\n        var events = [];\n        logger.addListener(\"log\", function (logEvent) { events.push(logEvent); });\n        logger.debug(\"Debug event\");\n        logger.trace(\"Trace event 1\");\n        logger.trace(\"Trace event 2\");\n        logger.warn(\"Warning event\");\n        logger.error(\"Aargh!\", new Error(\"Pants are on fire!\"));\n        logger.error(\"Simulated CouchDB problem\", { err: 127, cause: \"incendiary underwear\" });\n        return events;\n      },\n      \n      'should emit log events': function(events) {\n        assert.equal(events[0].level.toString(), 'DEBUG');\n        assert.equal(events[0].data[0], 'Debug event');\n        assert.instanceOf(events[0].startTime, Date);\n      },\n      \n      'should not emit events of a lower level': function(events) {\n        assert.equal(events.length, 4);\n        assert.equal(events[1].level.toString(), 'WARN');\n      },\n      \n      'should include the error if passed in': function(events) {\n        assert.instanceOf(events[2].data[1], Error);\n        assert.equal(events[2].data[1].message, 'Pants are on fire!');\n      }\n    }\n  },\n\n  'when shutdown is called': {\n    topic: function() {\n      var events = {\n       appenderShutdownCalled: false,\n       shutdownCallbackCalled: false\n      },\n      log4js = sandbox.require(\n        '../lib/log4js',\n        {\n          requires: {\n            './appenders/file':\n            {\n              name: \"file\",\n              appender: function() {},\n              configure: function(configuration) {\n                return function() {};\n              },\n              shutdown: function(cb) {\n                events.appenderShutdownCalled = true;\n                cb();\n              }\n            }\n          }\n        }\n      ),\n      shutdownCallback = function() {\n        events.shutdownCallbackCalled = true;\n      },\n      config = { appenders:\n                 [ { \"type\" : \"file\",\n                     \"filename\" : \"cheesy-wotsits.log\",\n                     \"maxLogSize\" : 1024,\n                     \"backups\" : 3\n                   }\n                 ]\n               };\n\n      log4js.configure(config);\n      log4js.shutdown(shutdownCallback);\n      // Re-enable log writing so other tests that use logger are not\n      // affected.\n      require('../lib/logger').enableAllLogWrites();\n      return events;\n    },\n\n    'should invoke appender shutdowns': function(events) {\n      assert.ok(events.appenderShutdownCalled);\n    },\n\n    'should call callback': function(events) {\n      assert.ok(events.shutdownCallbackCalled);\n    }\n  },\n  \n  'invalid configuration': {\n    'should throw an exception': function() {\n      assert.throws(function() {\n        require('log4js').configure({ \"type\": \"invalid\" });\n      });\n    }\n  },\n  \n  'configuration when passed as object': {\n    topic: function() {\n      var appenderConfig, \n      log4js = sandbox.require(\n        '../lib/log4js', \n        { \n          requires: { \n            './appenders/file': \n            {\n              name: \"file\",\n              appender: function() {},\n              configure: function(configuration) {\n                appenderConfig = configuration;\n                return function() {};\n              }\n            }\n          }\n        }\n      ), \n      config = { appenders: \n                 [ { \"type\" : \"file\",\n                     \"filename\" : \"cheesy-wotsits.log\",\n                     \"maxLogSize\" : 1024,\n                     \"backups\" : 3\n                   }\n                 ]\n               };\n      log4js.configure(config);\n      return appenderConfig;\n    },\n    'should be passed to appender config': function(configuration) {\n      assert.equal(configuration.filename, 'cheesy-wotsits.log');\n    }\n  },\n\n  'configuration that causes an error': {\n    topic: function() {\n      var log4js = sandbox.require(\n        '../lib/log4js', \n        { \n          requires: { \n            './appenders/file': \n            {\n              name: \"file\",\n              appender: function() {},\n              configure: function(configuration) {\n                throw new Error(\"oh noes\");\n              }\n            }\n          }\n        }\n      ), \n      config = { appenders: \n                 [ { \"type\" : \"file\",\n                     \"filename\" : \"cheesy-wotsits.log\",\n                     \"maxLogSize\" : 1024,\n                     \"backups\" : 3\n                   }\n                 ]\n               };\n      try {\n        log4js.configure(config);\n      } catch (e) {\n        return e;\n      }    \n    },\n    'should wrap error in a meaningful message': function(e) {\n      assert.ok(e.message.indexOf('log4js configuration problem for') > -1);\n    }\n  },\n\n  'configuration when passed as filename': {\n    topic: function() {\n      var appenderConfig, \n      configFilename, \n      log4js = sandbox.require(\n        '../lib/log4js', \n        { requires:\n          { 'fs':\n            { statSync: \n              function() {\n                return { mtime: Date.now() };\n              },\n              readFileSync: \n              function(filename) {\n                configFilename = filename;\n                return JSON.stringify({\n                  appenders: [\n                    { type: \"file\"\n                      , filename: \"whatever.log\"\n                    }\n                  ]\n                });\n              },\n              readdirSync: \n              function() {\n                return ['file'];\n              }\n            }, \n            './appenders/file': \n            { name: \"file\", \n              appender: function() {}, \n              configure: function(configuration) {\n                appenderConfig = configuration;\n                return function() {};\n              }\n            }\n          }\n        }\n      );\n      log4js.configure(\"/path/to/cheese.json\");\n      return [ configFilename, appenderConfig ];\n    },\n    'should read the config from a file': function(args) {\n      assert.equal(args[0], '/path/to/cheese.json');\n    },\n    'should pass config to appender': function(args) {\n      assert.equal(args[1].filename, \"whatever.log\");\n    }\n  },\n\n  'with no appenders defined' : {\n    topic: function() {\n      var logger, \n      that = this, \n      fakeConsoleAppender = {\n        name: \"console\", \n        appender: function() {\n          return function(evt) {\n            that.callback(null, evt);\n          };\n        }, \n        configure: function() {\n          return fakeConsoleAppender.appender();\n        }\n      }, \n      log4js = sandbox.require(\n        '../lib/log4js', \n        {\n          requires: {\n            './appenders/console': fakeConsoleAppender\n          }\n        }\n      );\n      logger = log4js.getLogger(\"some-logger\");\n      logger.debug(\"This is a test\");\n    },\n    'should default to the console appender': function(evt) {\n      assert.equal(evt.data[0], \"This is a test\");\n    }\n  },\n\n  'addAppender' : {\n    topic: function() {\n      var log4js = require('../lib/log4js');\n      log4js.clearAppenders();\n      return log4js;\n    },\n    'without a category': {\n      'should register the function as a listener for all loggers': function (log4js) {\n        var appenderEvent, \n        appender = function(evt) { appenderEvent = evt; }, \n        logger = log4js.getLogger(\"tests\");\n\n        log4js.addAppender(appender);\n        logger.debug(\"This is a test\");\n        assert.equal(appenderEvent.data[0], \"This is a test\");\n        assert.equal(appenderEvent.categoryName, \"tests\");\n        assert.equal(appenderEvent.level.toString(), \"DEBUG\");\n      },\n      'if an appender for a category is defined': {\n        'should register for that category': function (log4js) {\n          var otherEvent, \n          appenderEvent, \n          cheeseLogger;\n          \n          log4js.addAppender(function (evt) { appenderEvent = evt; });\n          log4js.addAppender(function (evt) { otherEvent = evt; }, 'cheese');\n        \n          cheeseLogger = log4js.getLogger('cheese');\n          cheeseLogger.debug('This is a test');\n          assert.deepEqual(appenderEvent, otherEvent);\n          assert.equal(otherEvent.data[0], 'This is a test');\n          assert.equal(otherEvent.categoryName, 'cheese');\n          \n          otherEvent = undefined;\n          appenderEvent = undefined;\n          log4js.getLogger('pants').debug(\"this should not be propagated to otherEvent\");\n          assert.isUndefined(otherEvent);\n          assert.equal(appenderEvent.data[0], \"this should not be propagated to otherEvent\");\n        }\n      }\n    },\n    \n    'with a category': {\n      'should only register the function as a listener for that category': function(log4js) {\n        var appenderEvent, \n        appender = function(evt) { appenderEvent = evt; }, \n        logger = log4js.getLogger(\"tests\");\n\n        log4js.addAppender(appender, 'tests');\n        logger.debug('this is a category test');\n        assert.equal(appenderEvent.data[0], 'this is a category test');\n        \n        appenderEvent = undefined;\n        log4js.getLogger('some other category').debug('Cheese');\n        assert.isUndefined(appenderEvent);\n      }\n    },\n    \n    'with multiple categories': {\n      'should register the function as a listener for all the categories': function(log4js) {\n        var appenderEvent, \n        appender = function(evt) { appenderEvent = evt; }, \n        logger = log4js.getLogger('tests');\n\n        log4js.addAppender(appender, 'tests', 'biscuits');\n        \n        logger.debug('this is a test');\n        assert.equal(appenderEvent.data[0], 'this is a test');\n        appenderEvent = undefined;\n        \n        var otherLogger = log4js.getLogger('biscuits');\n        otherLogger.debug(\"mmm... garibaldis\");\n        assert.equal(appenderEvent.data[0], \"mmm... garibaldis\");\n        \n        appenderEvent = undefined;\n        \n        log4js.getLogger(\"something else\").debug(\"pants\");\n        assert.isUndefined(appenderEvent);\n      },\n      'should register the function when the list of categories is an array': function(log4js) {\n        var appenderEvent, \n        appender = function(evt) { appenderEvent = evt; };\n\n        log4js.addAppender(appender, ['tests', 'pants']);\n        \n        log4js.getLogger('tests').debug('this is a test');\n        assert.equal(appenderEvent.data[0], 'this is a test');\n        \n        appenderEvent = undefined;\n        \n        log4js.getLogger('pants').debug(\"big pants\");\n        assert.equal(appenderEvent.data[0], \"big pants\");\n        \n        appenderEvent = undefined;\n\n        log4js.getLogger(\"something else\").debug(\"pants\");\n        assert.isUndefined(appenderEvent);\n      }\n    }\n  },\n  \n  'default setup': {\n    topic: function() {\n      var appenderEvents = [],\n      fakeConsole = {\n        'name': 'console', \n        'appender': function () {\n          return function(evt) {\n            appenderEvents.push(evt);\n          };\n        }, \n        'configure': function (config) {\n          return fakeConsole.appender();\n        }\n      },\n      globalConsole = {\n        log: function() { }\n      },\n      log4js = sandbox.require(\n        '../lib/log4js',\n        {\n          requires: {\n            './appenders/console': fakeConsole\n          },\n          globals: {\n            console: globalConsole\n          }\n        }\n      ),\n      logger = log4js.getLogger('a-test');\n      \n      logger.debug(\"this is a test\");\n      globalConsole.log(\"this should not be logged\");\n      \n      return appenderEvents;\n    },\n    \n    'should configure a console appender': function(appenderEvents) {\n      assert.equal(appenderEvents[0].data[0], 'this is a test');\n    },\n    \n    'should not replace console.log with log4js version': function(appenderEvents) {\n      assert.equal(appenderEvents.length, 1);\n    }\n  },\n  \n  'console' : {\n    topic: setupConsoleTest,\n    \n    'when replaceConsole called': {\n      topic: function(test) {\n        test.log4js.replaceConsole();\n        \n        test.fakeConsole.log(\"Some debug message someone put in a module\");\n        test.fakeConsole.debug(\"Some debug\");\n        test.fakeConsole.error(\"An error\");\n        test.fakeConsole.info(\"some info\");\n        test.fakeConsole.warn(\"a warning\");\n        \n        test.fakeConsole.log(\"cheese (%s) and biscuits (%s)\", \"gouda\", \"garibaldis\");\n        test.fakeConsole.log({ lumpy: \"tapioca\" });\n        test.fakeConsole.log(\"count %d\", 123);\n        test.fakeConsole.log(\"stringify %j\", { lumpy: \"tapioca\" });\n        \n        return test.logEvents;\n      },\n      \n      'should replace console.log methods with log4js ones': function(logEvents) {\n        assert.equal(logEvents.length, 9);\n        assert.equal(logEvents[0].data[0], \"Some debug message someone put in a module\");\n        assert.equal(logEvents[0].level.toString(), \"INFO\");\n        assert.equal(logEvents[1].data[0], \"Some debug\");\n        assert.equal(logEvents[1].level.toString(), \"DEBUG\");\n        assert.equal(logEvents[2].data[0], \"An error\");\n        assert.equal(logEvents[2].level.toString(), \"ERROR\");\n        assert.equal(logEvents[3].data[0], \"some info\");\n        assert.equal(logEvents[3].level.toString(), \"INFO\");\n        assert.equal(logEvents[4].data[0], \"a warning\");\n        assert.equal(logEvents[4].level.toString(), \"WARN\");\n        assert.equal(logEvents[5].data[0], \"cheese (%s) and biscuits (%s)\");\n        assert.equal(logEvents[5].data[1], \"gouda\");\n        assert.equal(logEvents[5].data[2], \"garibaldis\");\n      }\n    },\n    'when turned off': {\n      topic: function(test) {\n        test.log4js.restoreConsole();\n        try {\n          test.fakeConsole.log(\"This should cause the error described in the setup\");\n        } catch (e) {\n          return e;\n        }\n      },\n      'should call the original console methods': function (err) {\n        assert.instanceOf(err, Error);\n        assert.equal(err.message, \"this should not be called.\");\n      }\n    }\n  },\n  'console configuration': {\n    topic: setupConsoleTest,\n    'when disabled': {\n      topic: function(test) {\n        test.log4js.replaceConsole();\n        test.log4js.configure({ replaceConsole: false });\n        try {\n          test.fakeConsole.log(\"This should cause the error described in the setup\");\n        } catch (e) {\n          return e;\n        }\n      },\n      'should allow for turning off console replacement': function (err) {\n        assert.instanceOf(err, Error);\n        assert.equal(err.message, 'this should not be called.');\n      }\n    },\n    'when enabled': {\n      topic: function(test) {\n        test.log4js.restoreConsole();\n        test.log4js.configure({ replaceConsole: true });\n        //log4js.configure clears all appenders\n        test.log4js.addAppender(function(evt) {\n          test.logEvents.push(evt);\n        });\n\n        test.fakeConsole.debug(\"Some debug\");\n        return test.logEvents;\n      },\n      \n      'should allow for turning on console replacement': function (logEvents) {\n        assert.equal(logEvents.length, 1);\n        assert.equal(logEvents[0].level.toString(), \"DEBUG\");\n        assert.equal(logEvents[0].data[0], \"Some debug\");\n      }\n    }\n  },\n  'configuration persistence' : {\n    topic: function() {\n      var logEvent,\n      firstLog4js = require('../lib/log4js'),\n      secondLog4js;\n      \n      firstLog4js.clearAppenders();\n      firstLog4js.addAppender(function(evt) { logEvent = evt; });\n      \n      secondLog4js = require('../lib/log4js');\n      secondLog4js.getLogger().info(\"This should go to the appender defined in firstLog4js\");\n      \n      return logEvent;\n    },\n    'should maintain appenders between requires': function (logEvent) {\n      assert.equal(logEvent.data[0], \"This should go to the appender defined in firstLog4js\");\n    }\n  },\n\n  'getDefaultLogger': {\n    topic: function() {\n      return require('../lib/log4js').getDefaultLogger();\n    },\n    'should return a logger': function(logger) {\n      assert.ok(logger.info);\n      assert.ok(logger.debug);\n      assert.ok(logger.error);\n    }\n  }\n}).export(module);\n"]}