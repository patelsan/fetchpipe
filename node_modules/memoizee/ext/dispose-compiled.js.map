{"version":3,"sources":["dispose.js"],"names":[],"mappings":";;AAEA,YAAY,CAAC;;AAEb,IAAI,QAAQ,GAAK,OAAO,CAAC,+BAA+B,CAAC;IACrD,OAAO,GAAM,OAAO,CAAC,yBAAyB,CAAC;IAC/C,UAAU,GAAG,OAAO,CAAC,8BAA8B,CAAC;IAEpD,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK;IAAE,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC;;AAEpE,UAAU,CAAC,OAAO,GAAG,UAAU,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE;AACtD,KAAI,GAAG,CAAC;AACR,SAAQ,CAAC,OAAO,CAAC,CAAC;AAClB,KAAI,OAAO,CAAC,KAAK,IAAI,UAAU,CAAC,KAAK,EAAE;AACtC,MAAI,CAAC,EAAE,CAAC,aAAa,EAAE,GAAG,GAAG,UAAU,EAAE,EAAE,MAAM,EAAE;AAClD,QAAK,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;GACtD,CAAC,CAAC;AACH,MAAI,CAAC,EAAE,CAAC,YAAY,EAAE,UAAU,KAAK,EAAE;AACtC,UAAO,CAAC,KAAK,EAAE,UAAU,MAAM,EAAE,EAAE,EAAE;AAAE,OAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;IAAE,CAAC,CAAC;GAC3D,CAAC,CAAC;AACH,SAAO;EACP;AACD,KAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,GAAG,GAAG,UAAU,EAAE,EAAE,MAAM,EAAE;AAAE,SAAO,CAAC,MAAM,CAAC,CAAC;EAAE,CAAC,CAAC;AACpE,KAAI,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,KAAK,EAAE;AACjC,SAAO,CAAC,KAAK,EAAE,UAAU,MAAM,EAAE,EAAE,EAAE;AAAE,MAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;GAAE,CAAC,CAAC;EAC3D,CAAC,CAAC;CACH,CAAC","file":"dispose-compiled.js","sourcesContent":["// Call dispose callback on each cache purge\n\n'use strict';\n\nvar callable   = require('es5-ext/object/valid-callable')\n  , forEach    = require('es5-ext/object/for-each')\n  , extensions = require('../lib/registered-extensions')\n\n  , slice = Array.prototype.slice, apply = Function.prototype.apply;\n\nextensions.dispose = function (dispose, conf, options) {\n\tvar del;\n\tcallable(dispose);\n\tif (options.async && extensions.async) {\n\t\tconf.on('deleteasync', del = function (id, result) {\n\t\t\tapply.call(dispose, null, slice.call(result.args, 1));\n\t\t});\n\t\tconf.on('clearasync', function (cache) {\n\t\t\tforEach(cache, function (result, id) { del(id, result); });\n\t\t});\n\t\treturn;\n\t}\n\tconf.on('delete', del = function (id, result) { dispose(result); });\n\tconf.on('clear', function (cache) {\n\t\tforEach(cache, function (result, id) { del(id, result); });\n\t});\n};\n"]}