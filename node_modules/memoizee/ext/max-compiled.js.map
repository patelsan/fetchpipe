{"version":3,"sources":["max.js"],"names":[],"mappings":";;AAEA,YAAY,CAAC;;AAEb,IAAI,YAAY,GAAG,OAAO,CAAC,+BAA+B,CAAC;IACvD,QAAQ,GAAO,OAAO,CAAC,WAAW,CAAC;IACnC,UAAU,GAAK,OAAO,CAAC,8BAA8B,CAAC,CAAC;;AAE3D,UAAU,CAAC,GAAG,GAAG,UAAU,GAAG,EAAE,IAAI,EAAE,OAAO,EAAE;AAC9C,KAAI,OAAO,EAAE,KAAK,EAAE,GAAG,CAAC;;AAExB,IAAG,GAAG,YAAY,CAAC,GAAG,CAAC,CAAC;AACxB,KAAI,CAAC,GAAG,EAAE,OAAO;;AAEjB,MAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;AACtB,QAAO,GAAG,AAAC,OAAO,CAAC,KAAK,IAAI,UAAU,CAAC,KAAK,GAAI,OAAO,GAAG,EAAE,CAAC;;AAE7D,KAAI,CAAC,EAAE,CAAC,KAAK,GAAG,OAAO,EAAE,GAAG,GAAG,UAAU,EAAE,EAAE;AAC5C,IAAE,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AACnB,MAAI,EAAE,KAAK,SAAS,EAAE,OAAO;AAC7B,MAAI,UAAO,CAAC,EAAE,CAAC,CAAC;EAChB,CAAC,CAAC;AACH,KAAI,CAAC,EAAE,CAAC,KAAK,GAAG,OAAO,EAAE,GAAG,CAAC,CAAC;AAC9B,KAAI,CAAC,EAAE,CAAC,QAAQ,GAAG,OAAO,EAAE,KAAK,UAAO,CAAC,CAAC;AAC1C,KAAI,CAAC,EAAE,CAAC,OAAO,GAAG,OAAO,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;CACxC,CAAC","file":"max-compiled.js","sourcesContent":["// Limit cache size, LRU (least recently used) algorithm.\n\n'use strict';\n\nvar toPosInteger = require('es5-ext/number/to-pos-integer')\n  , lruQueue     = require('lru-queue')\n  , extensions   = require('../lib/registered-extensions');\n\nextensions.max = function (max, conf, options) {\n\tvar postfix, queue, hit;\n\n\tmax = toPosInteger(max);\n\tif (!max) return;\n\n\tqueue = lruQueue(max);\n\tpostfix = (options.async && extensions.async) ? 'async' : '';\n\n\tconf.on('set' + postfix, hit = function (id) {\n\t\tid = queue.hit(id);\n\t\tif (id === undefined) return;\n\t\tconf.delete(id);\n\t});\n\tconf.on('get' + postfix, hit);\n\tconf.on('delete' + postfix, queue.delete);\n\tconf.on('clear' + postfix, queue.clear);\n};\n"]}