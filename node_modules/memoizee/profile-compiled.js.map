{"version":3,"sources":["profile.js"],"names":[],"mappings":"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","file":"profile-compiled.js","sourcesContent":["// Gathers statistical data, and provides them in convinient form\n\n'use strict';\n\nvar partial  = require('es5-ext/function/#/partial')\n  , forEach  = require('es5-ext/object/for-each')\n  , pad      = require('es5-ext/string/#/pad')\n  , d        = require('d')\n  , memoize  = require('./plain')\n\n  , max = Math.max\n  , stats = exports.statistics = {};\n\nObject.defineProperty(memoize, '__profiler__', d(function (conf) {\n\tvar id, stack, data;\n\tstack = (new Error()).stack;\n\tif (!stack || !stack.split('\\n').slice(3).some(function (line) {\n\t\t\tif ((line.indexOf('/memoizee/') === -1) &&\n\t\t\t\t\t(line.indexOf(' (native)') === -1)) {\n\t\t\t\tid  = line.replace(/\\n/g, \"\\\\n\").trim();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t})) {\n\t\tid = 'unknown';\n\t}\n\n\tif (!stats[id]) stats[id] = { initial: 0, cached: 0 };\n\tdata = stats[id];\n\n\tconf.on('set', function () { ++data.initial; });\n\tconf.on('get', function () { ++data.cached; });\n}));\n\nexports.log = function () {\n\tvar initial, cached, ordered, ipad, cpad, ppad, toPrc, log;\n\n\tinitial = cached = 0;\n\tordered = [];\n\n\ttoPrc = function (initial, cached) {\n\t\tif (!initial && !cached) {\n\t\t\treturn '0.00';\n\t\t}\n\t\treturn ((cached / (initial + cached)) * 100).toFixed(2);\n\t};\n\n\tlog = \"------------------------------------------------------------\\n\";\n\tlog += \"Memoize statistics:\\n\\n\";\n\n\tforEach(stats, function (data, name) {\n\t\tinitial += data.initial;\n\t\tcached += data.cached;\n\t\tordered.push([name, data]);\n\t}, null, function (a, b) {\n\t\treturn (this[b].initial + this[b].cached) -\n\t\t\t(this[a].initial + this[a].cached);\n\t});\n\n\tipad = partial.call(pad, \" \",\n\t\tmax(String(initial).length, \"Init\".length));\n\tcpad = partial.call(pad, \" \", max(String(cached).length, \"Cache\".length));\n\tppad = partial.call(pad, \" \", \"%Cache\".length);\n\tlog += ipad.call(\"Init\") + \"  \" +\n\t\tcpad.call(\"Cache\") + \"  \" +\n\t\tppad.call(\"%Cache\") + \"  Source location\\n\";\n\tlog += ipad.call(initial) + \"  \" +\n\t\tcpad.call(cached) + \"  \" +\n\t\tppad.call(toPrc(initial, cached)) + \"  (all)\\n\";\n\tordered.forEach(function (data) {\n\t\tvar name = data[0];\n\t\tdata = data[1];\n\t\tlog += ipad.call(data.initial) + \"  \" +\n\t\t\tcpad.call(data.cached) + \"  \" +\n\t\t\tppad.call(toPrc(data.initial, data.cached)) + \"  \" + name + \"\\n\";\n\t});\n\tlog += \"------------------------------------------------------------\\n\";\n\treturn log;\n};\n"]}