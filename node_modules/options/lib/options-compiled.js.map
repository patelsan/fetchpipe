{"version":3,"sources":["options.js"],"names":[],"mappings":"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","file":"options-compiled.js","sourcesContent":["/*!\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\nvar fs = require('fs');\n\nfunction Options(defaults) {\n  var internalValues = {};\n  var values = this.value = {};\n  Object.keys(defaults).forEach(function(key) {\n    internalValues[key] = defaults[key];\n    Object.defineProperty(values, key, {\n      get: function() { return internalValues[key]; },\n      configurable: false,\n      enumerable: true\n    });\n  });\n  this.reset = function() {\n    Object.keys(defaults).forEach(function(key) {\n      internalValues[key] = defaults[key];\n    });\n    return this;\n  };\n  this.merge = function(options, required) {\n    options = options || {};\n    if (Object.prototype.toString.call(required) === '[object Array]') {\n      var missing = [];\n      for (var i = 0, l = required.length; i < l; ++i) {\n        var key = required[i];\n        if (!(key in options)) {\n          missing.push(key);\n        }\n      }\n      if (missing.length > 0) {\n        if (missing.length > 1) {\n          throw new Error('options ' +\n            missing.slice(0, missing.length - 1).join(', ') + ' and ' +\n            missing[missing.length - 1] + ' must be defined');\n        }\n        else throw new Error('option ' + missing[0] + ' must be defined');\n      }\n    }\n    Object.keys(options).forEach(function(key) {\n      if (key in internalValues) {\n        internalValues[key] = options[key];\n      }\n    });\n    return this;\n  };\n  this.copy = function(keys) {\n    var obj = {};\n    Object.keys(defaults).forEach(function(key) {\n      if (keys.indexOf(key) !== -1) {\n        obj[key] = values[key];\n      }\n    });\n    return obj;\n  };\n  this.read = function(filename, cb) {\n    if (typeof cb == 'function') {\n      var self = this;\n      fs.readFile(filename, function(error, data) {\n        if (error) return cb(error);\n        var conf = JSON.parse(data);\n        self.merge(conf);\n        cb();\n      });\n    }\n    else {\n      var conf = JSON.parse(fs.readFileSync(filename));\n      this.merge(conf);\n    }\n    return this;\n  };\n  this.isDefined = function(key) {\n    return typeof values[key] != 'undefined';\n  };\n  this.isDefinedAndNonNull = function(key) {\n    return typeof values[key] != 'undefined' && values[key] !== null;\n  };\n  Object.freeze(values);\n  Object.freeze(this);\n}\n\nmodule.exports = Options;\n"]}