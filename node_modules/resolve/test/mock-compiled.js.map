{"version":3,"sources":["mock.js"],"names":[],"mappings":"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","file":"mock-compiled.js","sourcesContent":["var test = require('tape');\nvar resolve = require('../');\n\ntest('mock', function (t) {\n    t.plan(6);\n    \n    var files = {\n        '/foo/bar/baz.js' : 'beep'\n    };\n    \n    function opts (basedir) {\n        return {\n            basedir : basedir,\n            isFile : function (file, cb) {\n                cb(null, files.hasOwnProperty(file));\n            },\n            readFile : function (file, cb) {\n                cb(null, files[file]);\n            }\n        }\n    }\n    \n    resolve('./baz', opts('/foo/bar'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/bar/baz.js');\n        t.equal(pkg, undefined);\n    });\n    \n    resolve('./baz.js', opts('/foo/bar'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/bar/baz.js');\n        t.equal(pkg, undefined);\n    });\n    \n    resolve('baz', opts('/foo/bar'), function (err, res) {\n        t.equal(err.message, \"Cannot find module 'baz' from '/foo/bar'\");\n    });\n    \n    resolve('../baz', opts('/foo/bar'), function (err, res) {\n        t.equal(err.message, \"Cannot find module '../baz' from '/foo/bar'\");\n    });\n});\n\ntest('mock from package', function (t) {\n    t.plan(6);\n    \n    var files = {\n        '/foo/bar/baz.js' : 'beep'\n    };\n    \n    function opts (basedir) {\n        return {\n            basedir : basedir,\n            package : { main: 'bar' },\n            isFile : function (file, cb) {\n                cb(null, files.hasOwnProperty(file));\n            },\n            readFile : function (file, cb) {\n                cb(null, files[file]);\n            }\n        }\n    }\n    \n    resolve('./baz', opts('/foo/bar'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/bar/baz.js');\n        t.equal(pkg.main, 'bar');\n    });\n    \n    resolve('./baz.js', opts('/foo/bar'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/bar/baz.js');\n        t.equal(pkg.main, 'bar');\n    });\n    \n    resolve('baz', opts('/foo/bar'), function (err, res) {\n        t.equal(err.message, \"Cannot find module 'baz' from '/foo/bar'\");\n    });\n    \n    resolve('../baz', opts('/foo/bar'), function (err, res) {\n        t.equal(err.message, \"Cannot find module '../baz' from '/foo/bar'\");\n    });\n});\n\ntest('mock package', function (t) {\n    t.plan(2);\n    \n    var files = {\n        '/foo/node_modules/bar/baz.js' : 'beep',\n        '/foo/node_modules/bar/package.json' : JSON.stringify({\n            main : './baz.js'\n        })\n    };\n    \n    function opts (basedir) {\n        return {\n            basedir : basedir,\n            isFile : function (file, cb) {\n                cb(null, files.hasOwnProperty(file));\n            },\n            readFile : function (file, cb) {\n                cb(null, files[file]);\n            }\n        }\n    }\n    \n    resolve('bar', opts('/foo'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/node_modules/bar/baz.js');\n        t.equal(pkg.main, './baz.js');\n    });\n});\n\ntest('mock package from package', function (t) {\n    t.plan(2);\n    \n    var files = {\n        '/foo/node_modules/bar/baz.js' : 'beep',\n        '/foo/node_modules/bar/package.json' : JSON.stringify({\n            main : './baz.js'\n        })\n    };\n    \n    function opts (basedir) {\n        return {\n            basedir : basedir,\n            package : { main: 'bar' },\n            isFile : function (file, cb) {\n                cb(null, files.hasOwnProperty(file));\n            },\n            readFile : function (file, cb) {\n                cb(null, files[file]);\n            }\n        }\n    }\n    \n    resolve('bar', opts('/foo'), function (err, res, pkg) {\n        if (err) t.fail(err);\n        t.equal(res, '/foo/node_modules/bar/baz.js');\n        t.equal(pkg.main, './baz.js');\n    });\n});\n"]}