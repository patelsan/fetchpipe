{"version":3,"sources":["socket.js"],"names":[],"mappings":"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","file":"socket-compiled.js","sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar hasBin = require('has-binary');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket(io, nsp){\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  if (this.io.autoConnect) this.open();\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function() {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function(){\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' == this.io.readyState) this.onopen();\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function(){\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function(ev){\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var parserType = parser.EVENT; // default\n  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n  var packet = { type: parserType, data: args };\n\n  // event ack callback\n  if ('function' == typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function(packet){\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function(){\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' != this.nsp) {\n    this.packet({ type: parser.CONNECT });\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function(reason){\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function(packet){\n  if (packet.nsp != this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function(packet){\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function(id){\n  var self = this;\n  var sent = false;\n  return function(){\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n    self.packet({\n      type: type,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function(packet){\n  debug('calling ack %s with %j', packet.id, packet.data);\n  var fn = this.acks[packet.id];\n  fn.apply(this, packet.data);\n  delete this.acks[packet.id];\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function(){\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function(){\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function(){\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function(){\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function(){\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n"]}