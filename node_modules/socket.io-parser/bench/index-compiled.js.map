{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var Benchmark = require('benchmark');\nvar parser = require('../index');\n\nfunction test(packet, deferred) {\n  var encoder = new parser.Encoder();\n  var decoder = new parser.Decoder();\n  encoder.encode(packet, function(encodedPackets) {\n    var decoder = new parser.Decoder();\n    decoder.on('decoded', function(packet) {\n      deferred.resolve();\n    });\n\n    decoder.add(encodedPackets[0]);\n  });\n}\n\nvar dataObject = {\n  'a': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],\n  'b': 'xxxyyyzzzalsdfalskdjfalksdjfalksdjfalksdjfjjfjfjfjjfjfjfj',\n  'data': {\n    'is': 'cool',\n    'or': {\n      'is': {\n        'it': true\n      }\n    }\n   }\n};\nvar bigArray = [];\nfor (var i = 0; i < 250; i++) {\n  bigArray.push(dataObject);\n}\n\n\n\nmodule.exports = function(callback) {\n  var suite = new Benchmark.Suite();\n\n  suite.add('small json parse', {defer: true, fn: function(deferred) {\n    var packet = {\n      type: parser.EVENT,\n      nsp: '/bench',\n      data: dataObject\n    };\n    test(packet, deferred);\n  }})\n  .add('big json parse', {defer: true, fn: function(deferred) {\n    var packet = {\n      type: parser.EVENT,\n      nsp: '/bench',\n      data: bigArray\n    };\n    test(packet, deferred);\n  }})\n  .add('json with small binary parse', {defer: true, fn: function(deferred) {\n    var packet = {\n      type: parser.EVENT,\n      nsp: '/bench',\n      data: {'a': [1, 2, 3], 'b': 'xxxyyyzzz', 'data': new Buffer(1000)}\n    };\n    test(packet, deferred);\n  }})\n  .add('json with big binary parse', {defer: true, fn: function(deferred) {\n    var bigBinaryData = {\n      bin1: new Buffer(10000),\n      arr: bigArray,\n      bin2: new Buffer(10000),\n      bin3: new Buffer(10000)\n    };\n    var packet = {\n      type: parser.EVENT,\n      nsp: '/bench',\n      data: bigBinaryData\n    };\n    test(packet, deferred);\n  }})\n  .on('complete', function() {\n    callback(this);\n  })\n  .run({'async': true});\n};\n"]}