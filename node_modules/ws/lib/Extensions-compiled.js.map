{"version":3,"sources":["Extensions.js"],"names":[],"mappings":";;AACA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;;;;;AAM3B,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;AACtB,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;;;;;;AAMxB,SAAS,KAAK,CAAC,KAAK,EAAE;AACpB,OAAK,GAAG,KAAK,IAAI,EAAE,CAAC;;AAEpB,MAAI,UAAU,GAAG,EAAE,CAAC;;AAEpB,OAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAS,CAAC,EAAE;AACnC,QAAI,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC1B,QAAI,KAAK,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC;AAClC,QAAI,UAAU,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;AAC7D,QAAI,YAAY,GAAG,EAAE,CAAC;;AAEtB,UAAM,CAAC,OAAO,CAAC,UAAS,KAAK,EAAE;AAC7B,UAAI,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACpC,UAAI,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACnB,UAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACrB,UAAI,OAAO,KAAK,KAAK,WAAW,EAAE;AAChC,aAAK,GAAG,IAAI,CAAC;OACd,MAAM;;AAEL,YAAI,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AACpB,eAAK,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SACxB;AACD,YAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;AACnC,eAAK,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;SAC1C;OACF;AACD,OAAC,YAAY,CAAC,GAAG,CAAC,GAAG,YAAY,CAAC,GAAG,CAAC,IAAI,EAAE,CAAA,CAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KAC3D,CAAC,CAAC;;AAEH,cAAU,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;GAC/B,CAAC,CAAC;;AAEH,SAAO,UAAU,CAAC;CACnB;;;;;;AAMD,SAAS,MAAM,CAAC,KAAK,EAAE;AACrB,SAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,UAAS,KAAK,EAAE;AAC5C,QAAI,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;AAC9B,QAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AAC7B,gBAAU,GAAG,CAAC,UAAU,CAAC,CAAC;KAC3B;AACD,WAAO,UAAU,CAAC,GAAG,CAAC,UAAS,MAAM,EAAE;AACrC,aAAO,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,UAAS,CAAC,EAAE;AACxD,YAAI,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AAClB,YAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC9B,eAAO,CAAC,CAAC,GAAG,CAAC,UAAS,CAAC,EAAE;AACvB,iBAAO,CAAC,KAAK,IAAI,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;SACrC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACf,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAChB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GACf,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;CACf","file":"Extensions-compiled.js","sourcesContent":["\nvar util = require('util');\n\n/**\n * Module exports.\n */\n\nexports.parse = parse;\nexports.format = format;\n\n/**\n * Parse extensions header value\n */\n\nfunction parse(value) {\n  value = value || '';\n\n  var extensions = {};\n\n  value.split(',').forEach(function(v) {\n    var params = v.split(';');\n    var token = params.shift().trim();\n    var paramsList = extensions[token] = extensions[token] || [];\n    var parsedParams = {};\n\n    params.forEach(function(param) {\n      var parts = param.trim().split('=');\n      var key = parts[0];\n      var value = parts[1];\n      if (typeof value === 'undefined') {\n        value = true;\n      } else {\n        // unquote value\n        if (value[0] === '\"') {\n          value = value.slice(1);\n        }\n        if (value[value.length - 1] === '\"') {\n          value = value.slice(0, value.length - 1);\n        }\n      }\n      (parsedParams[key] = parsedParams[key] || []).push(value);\n    });\n\n    paramsList.push(parsedParams);\n  });\n\n  return extensions;\n}\n\n/**\n * Format extensions header value\n */\n\nfunction format(value) {\n  return Object.keys(value).map(function(token) {\n    var paramsList = value[token];\n    if (!util.isArray(paramsList)) {\n      paramsList = [paramsList];\n    }\n    return paramsList.map(function(params) {\n      return [token].concat(Object.keys(params).map(function(k) {\n        var p = params[k];\n        if (!util.isArray(p)) p = [p];\n        return p.map(function(v) {\n          return v === true ? k : k + '=' + v;\n        }).join('; ');\n      })).join('; ');\n    }).join(', ');\n  }).join(', ');\n}\n"]}